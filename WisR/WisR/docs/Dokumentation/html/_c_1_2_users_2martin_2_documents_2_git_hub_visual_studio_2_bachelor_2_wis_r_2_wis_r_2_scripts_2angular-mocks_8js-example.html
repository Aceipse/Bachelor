<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>WisR web applikation: C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-mocks.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WisR web applikation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-mocks.js</div>  </div>
</div><!--header-->
<div class="contents">
<p>!!!! WARNING !!!!! This is not a complete Date object so only methods that were implemented can be called safely. To make matters worse, TzDate instances inherit stuff from Date via a prototype.</p>
<p>We do our best to intercept calls to "unimplemented" methods, but since the list of methods is incomplete we might be missing some non-standard methods. This can result in errors like: "Date.prototype.foo called on incompatible Object".</p>
<ul>
<li>```js var newYearInBratislava = new TzDate(-1, '2009-12-31T23:00:00Z'); newYearInBratislava.getTimezoneOffset() =&gt; -60; newYearInBratislava.getFullYear() =&gt; 2010; newYearInBratislava.getMonth() =&gt; 0; newYearInBratislava.getDate() =&gt; 1; newYearInBratislava.getHours() =&gt; 0; newYearInBratislava.getMinutes() =&gt; 0; newYearInBratislava.getSeconds() =&gt; 0;</li>
<li>```</li>
</ul>
<div class="fragment"><div class="line"></div>
<div class="line">(<span class="keyword">function</span>(window, angular, undefined) {</div>
<div class="line"></div>
<div class="line"><span class="stringliteral">&#39;use strict&#39;</span>;</div>
<div class="line"></div>
<div class="line">angular.mock = {};</div>
<div class="line"></div>
<div class="line">angular.mock.$BrowserProvider = <span class="keyword">function</span>() {</div>
<div class="line">  this.$get = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">new</span> angular.mock.$Browser();</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">angular.mock.$Browser = <span class="keyword">function</span>() {</div>
<div class="line">  var <span class="keyword">self</span> = <span class="keyword">this</span>;</div>
<div class="line"></div>
<div class="line">  this.isMock = <span class="keyword">true</span>;</div>
<div class="line">  <span class="keyword">self</span>.$$url = <span class="stringliteral">&quot;http://server/&quot;</span>;</div>
<div class="line">  <span class="keyword">self</span>.$$lastUrl = <span class="keyword">self</span>.$$url; <span class="comment">// used by url polling fn</span></div>
<div class="line">  <span class="keyword">self</span>.pollFns = [];</div>
<div class="line"></div>
<div class="line">  <span class="comment">// TODO(vojta): remove this temporary api</span></div>
<div class="line">  <span class="keyword">self</span>.$$completeOutstandingRequest = angular.noop;</div>
<div class="line">  <span class="keyword">self</span>.$$incOutstandingRequestCount = angular.noop;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// register url polling fn</span></div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.onUrlChange = <span class="keyword">function</span>(listener) {</div>
<div class="line">    <span class="keyword">self</span>.pollFns.push(</div>
<div class="line">      <span class="keyword">function</span>() {</div>
<div class="line">        <span class="keywordflow">if</span> (<span class="keyword">self</span>.$$lastUrl !== <span class="keyword">self</span>.$$url || <span class="keyword">self</span>.$$state !== <span class="keyword">self</span>.$$lastState) {</div>
<div class="line">          <span class="keyword">self</span>.$$lastUrl = <span class="keyword">self</span>.$$url;</div>
<div class="line">          <span class="keyword">self</span>.$$lastState = <span class="keyword">self</span>.$$state;</div>
<div class="line">          listener(<span class="keyword">self</span>.$$url, <span class="keyword">self</span>.$$state);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> listener;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.$$applicationDestroyed = angular.noop;</div>
<div class="line">  <span class="keyword">self</span>.$$checkUrlChange = angular.noop;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.deferredFns = [];</div>
<div class="line">  <span class="keyword">self</span>.deferredNextId = 0;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.defer = <span class="keyword">function</span>(fn, delay) {</div>
<div class="line">    delay = delay || 0;</div>
<div class="line">    <span class="keyword">self</span>.deferredFns.push({time:(<span class="keyword">self</span>.defer.now + delay), fn:fn, <span class="keywordtype">id</span>: <span class="keyword">self</span>.deferredNextId});</div>
<div class="line">    <span class="keyword">self</span>.deferredFns.sort(<span class="keyword">function</span>(a, b) { <span class="keywordflow">return</span> a.time - b.time;});</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.deferredNextId++;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.defer.now = 0;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.defer.cancel = <span class="keyword">function</span>(deferId) {</div>
<div class="line">    var fnIndex;</div>
<div class="line"></div>
<div class="line">    angular.forEach(<span class="keyword">self</span>.deferredFns, <span class="keyword">function</span>(fn, index) {</div>
<div class="line">      <span class="keywordflow">if</span> (fn.id === deferId) fnIndex = index;</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (fnIndex !== undefined) {</div>
<div class="line">      <span class="keyword">self</span>.deferredFns.splice(fnIndex, 1);</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.defer.flush = <span class="keyword">function</span>(delay) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isDefined(delay)) {</div>
<div class="line">      <span class="keyword">self</span>.defer.now += delay;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (<span class="keyword">self</span>.deferredFns.length) {</div>
<div class="line">        <span class="keyword">self</span>.defer.now = <span class="keyword">self</span>.deferredFns[<span class="keyword">self</span>.deferredFns.length - 1].time;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No deferred tasks to be flushed&#39;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">self</span>.deferredFns.length &amp;&amp; <span class="keyword">self</span>.deferredFns[0].time &lt;= <span class="keyword">self</span>.defer.now) {</div>
<div class="line">      <span class="keyword">self</span>.deferredFns.shift().fn();</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.$$baseHref = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line">  <span class="keyword">self</span>.baseHref = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> this.$$baseHref;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line">angular.mock.$Browser.prototype = {</div>
<div class="line"></div>
<div class="line">  poll: <span class="keyword">function</span> poll() {</div>
<div class="line">    angular.forEach(this.pollFns, <span class="keyword">function</span>(pollFn) {</div>
<div class="line">      pollFn();</div>
<div class="line">    });</div>
<div class="line">  },</div>
<div class="line"></div>
<div class="line">  url: <span class="keyword">function</span>(url, replace, state) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isUndefined(state)) {</div>
<div class="line">      state = null;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (url) {</div>
<div class="line">      this.$$url = url;</div>
<div class="line">      <span class="comment">// Native pushState serializes &amp; copies the object; simulate it.</span></div>
<div class="line">      this.$$state = angular.copy(state);</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> this.$$url;</div>
<div class="line">  },</div>
<div class="line"></div>
<div class="line">  state: <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> this.$$state;</div>
<div class="line">  },</div>
<div class="line"></div>
<div class="line">  notifyWhenNoOutstandingRequests: <span class="keyword">function</span>(fn) {</div>
<div class="line">    fn();</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.$ExceptionHandlerProvider = <span class="keyword">function</span>() {</div>
<div class="line">  var handler;</div>
<div class="line"></div>
<div class="line">  this.mode = <span class="keyword">function</span>(mode) {</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span> (mode) {</div>
<div class="line">      <span class="keywordflow">case</span> <span class="stringliteral">&#39;log&#39;</span>:</div>
<div class="line">      <span class="keywordflow">case</span> <span class="stringliteral">&#39;rethrow&#39;</span>:</div>
<div class="line">        var errors = [];</div>
<div class="line">        handler = <span class="keyword">function</span>(e) {</div>
<div class="line">          <span class="keywordflow">if</span> (arguments.length == 1) {</div>
<div class="line">            errors.push(e);</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            errors.push([].slice.call(arguments, 0));</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (mode === <span class="stringliteral">&quot;rethrow&quot;</span>) {</div>
<div class="line">            <span class="keywordflow">throw</span> e;</div>
<div class="line">          }</div>
<div class="line">        };</div>
<div class="line">        handler.errors = errors;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;Unknown mode &#39;&quot;</span> + mode + <span class="stringliteral">&quot;&#39;, only &#39;log&#39;/&#39;rethrow&#39; modes are allowed!&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.$get = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> handler;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.mode(<span class="stringliteral">&#39;rethrow&#39;</span>);</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.$LogProvider = <span class="keyword">function</span>() {</div>
<div class="line">  var debug = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> concat(array1, array2, index) {</div>
<div class="line">    <span class="keywordflow">return</span> array1.concat(Array.prototype.slice.call(array2, index));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  this.debugEnabled = <span class="keyword">function</span>(flag) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isDefined(flag)) {</div>
<div class="line">      debug = flag;</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">return</span> debug;</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.$get = <span class="keyword">function</span>() {</div>
<div class="line">    var $log = {</div>
<div class="line">      log: <span class="keyword">function</span>() { $log.log.logs.push(concat([], arguments, 0)); },</div>
<div class="line">      warn: <span class="keyword">function</span>() { $log.warn.logs.push(concat([], arguments, 0)); },</div>
<div class="line">      info: <span class="keyword">function</span>() { $log.info.logs.push(concat([], arguments, 0)); },</div>
<div class="line">      error: <span class="keyword">function</span>() { $log.error.logs.push(concat([], arguments, 0)); },</div>
<div class="line">      debug: <span class="keyword">function</span>() {</div>
<div class="line">        <span class="keywordflow">if</span> (debug) {</div>
<div class="line">          $log.debug.logs.push(concat([], arguments, 0));</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    $log.reset = <span class="keyword">function</span>() {</div>
<div class="line">      $log.log.logs = [];</div>
<div class="line">      $log.info.logs = [];</div>
<div class="line">      $log.warn.logs = [];</div>
<div class="line">      $log.error.logs = [];</div>
<div class="line">      $log.debug.logs = [];</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    $log.assertEmpty = <span class="keyword">function</span>() {</div>
<div class="line">      var errors = [];</div>
<div class="line">      angular.forEach([<span class="stringliteral">&#39;error&#39;</span>, <span class="stringliteral">&#39;warn&#39;</span>, <span class="stringliteral">&#39;info&#39;</span>, <span class="stringliteral">&#39;log&#39;</span>, <span class="stringliteral">&#39;debug&#39;</span>], <span class="keyword">function</span>(logLevel) {</div>
<div class="line">        angular.forEach($log[logLevel].logs, <span class="keyword">function</span>(log) {</div>
<div class="line">          angular.forEach(log, <span class="keyword">function</span>(logItem) {</div>
<div class="line">            errors.push(<span class="stringliteral">&#39;MOCK $log (&#39;</span> + logLevel + <span class="stringliteral">&#39;): &#39;</span> + String(logItem) + <span class="charliteral">&#39;\n&#39;</span> +</div>
<div class="line">                        (logItem.stack || <span class="stringliteral">&#39;&#39;</span>));</div>
<div class="line">          });</div>
<div class="line">        });</div>
<div class="line">      });</div>
<div class="line">      <span class="keywordflow">if</span> (errors.length) {</div>
<div class="line">        errors.unshift(<span class="stringliteral">&quot;Expected $log to be empty! Either a message was logged unexpectedly, or &quot;</span> +</div>
<div class="line">          <span class="stringliteral">&quot;an expected log message was not checked and removed:&quot;</span>);</div>
<div class="line">        errors.push(<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(errors.join(<span class="stringliteral">&#39;\n---------\n&#39;</span>));</div>
<div class="line">      }</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    $log.reset();</div>
<div class="line">    <span class="keywordflow">return</span> $log;</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.$IntervalProvider = <span class="keyword">function</span>() {</div>
<div class="line">  this.$get = [<span class="stringliteral">&#39;$browser&#39;</span>, <span class="stringliteral">&#39;$rootScope&#39;</span>, <span class="stringliteral">&#39;$q&#39;</span>, <span class="stringliteral">&#39;$$q&#39;</span>,</div>
<div class="line">       <span class="keyword">function</span>($browser,   $rootScope,   $q,   $$q) {</div>
<div class="line">    var repeatFns = [],</div>
<div class="line">        nextRepeatId = 0,</div>
<div class="line">        now = 0;</div>
<div class="line"></div>
<div class="line">    var $interval = <span class="keyword">function</span>(fn, delay, count, invokeApply) {</div>
<div class="line">      var hasParams = arguments.length &gt; 4,</div>
<div class="line">          args = hasParams ? Array.prototype.slice.call(arguments, 4) : [],</div>
<div class="line">          iteration = 0,</div>
<div class="line">          skipApply = (angular.isDefined(invokeApply) &amp;&amp; !invokeApply),</div>
<div class="line">          deferred = (skipApply ? $$q : $q).defer(),</div>
<div class="line">          promise = deferred.promise;</div>
<div class="line"></div>
<div class="line">      count = (angular.isDefined(count)) ? count : 0;</div>
<div class="line">      promise.then(null, null, (!hasParams) ? fn : <span class="keyword">function</span>() {</div>
<div class="line">        fn.apply(null, args);</div>
<div class="line">      });</div>
<div class="line"></div>
<div class="line">      promise.$$intervalId = nextRepeatId;</div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> tick() {</div>
<div class="line">        deferred.notify(iteration++);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (count &gt; 0 &amp;&amp; iteration &gt;= count) {</div>
<div class="line">          var fnIndex;</div>
<div class="line">          deferred.resolve(iteration);</div>
<div class="line"></div>
<div class="line">          angular.forEach(repeatFns, <span class="keyword">function</span>(fn, index) {</div>
<div class="line">            <span class="keywordflow">if</span> (fn.id === promise.$$intervalId) fnIndex = index;</div>
<div class="line">          });</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">if</span> (fnIndex !== undefined) {</div>
<div class="line">            repeatFns.splice(fnIndex, 1);</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (skipApply) {</div>
<div class="line">          $browser.defer.flush();</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          $rootScope.$apply();</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      repeatFns.push({</div>
<div class="line">        nextTime:(now + delay),</div>
<div class="line">        delay: delay,</div>
<div class="line">        fn: tick,</div>
<div class="line">        <span class="keywordtype">id</span>: nextRepeatId,</div>
<div class="line">        deferred: deferred</div>
<div class="line">      });</div>
<div class="line">      repeatFns.sort(<span class="keyword">function</span>(a, b) { <span class="keywordflow">return</span> a.nextTime - b.nextTime;});</div>
<div class="line"></div>
<div class="line">      nextRepeatId++;</div>
<div class="line">      <span class="keywordflow">return</span> promise;</div>
<div class="line">    };</div>
<div class="line">    $interval.cancel = <span class="keyword">function</span>(promise) {</div>
<div class="line">      <span class="keywordflow">if</span> (!promise) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">      var fnIndex;</div>
<div class="line"></div>
<div class="line">      angular.forEach(repeatFns, <span class="keyword">function</span>(fn, index) {</div>
<div class="line">        <span class="keywordflow">if</span> (fn.id === promise.$$intervalId) fnIndex = index;</div>
<div class="line">      });</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (fnIndex !== undefined) {</div>
<div class="line">        repeatFns[fnIndex].deferred.reject(<span class="stringliteral">&#39;canceled&#39;</span>);</div>
<div class="line">        repeatFns.splice(fnIndex, 1);</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    $interval.flush = <span class="keyword">function</span>(millis) {</div>
<div class="line">      now += millis;</div>
<div class="line">      <span class="keywordflow">while</span> (repeatFns.length &amp;&amp; repeatFns[0].nextTime &lt;= now) {</div>
<div class="line">        var task = repeatFns[0];</div>
<div class="line">        task.fn();</div>
<div class="line">        task.nextTime += task.delay;</div>
<div class="line">        repeatFns.sort(<span class="keyword">function</span>(a, b) { <span class="keywordflow">return</span> a.nextTime - b.nextTime;});</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">return</span> millis;</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $interval;</div>
<div class="line">  }];</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/* jshint -W101 */</span></div>
<div class="line"><span class="comment">/* The R_ISO8061_STR regex is never going to fit into the 100 char limit!</span></div>
<div class="line"><span class="comment"> * This directive should go inside the anonymous function but a bug in JSHint means that it would</span></div>
<div class="line"><span class="comment"> * not be enacted early enough to prevent the warning.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">var R_ISO8061_STR = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?:\:?(\d\d)(?:\:?(\d\d)(?:\.(\d{3}))?)?)?(Z|([+-])(\d\d):?(\d\d)))?$/;</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> jsonStringToDate(<span class="keywordtype">string</span>) {</div>
<div class="line">  var match;</div>
<div class="line">  <span class="keywordflow">if</span> (match = <span class="keywordtype">string</span>.match(R_ISO8061_STR)) {</div>
<div class="line">    var date = <span class="keyword">new</span> Date(0),</div>
<div class="line">        tzHour = 0,</div>
<div class="line">        tzMin  = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (match[9]) {</div>
<div class="line">      tzHour = toInt(match[9] + match[10]);</div>
<div class="line">      tzMin = toInt(match[9] + match[11]);</div>
<div class="line">    }</div>
<div class="line">    date.setUTCFullYear(toInt(match[1]), toInt(match[2]) - 1, toInt(match[3]));</div>
<div class="line">    date.setUTCHours(toInt(match[4] || 0) - tzHour,</div>
<div class="line">                     toInt(match[5] || 0) - tzMin,</div>
<div class="line">                     toInt(match[6] || 0),</div>
<div class="line">                     toInt(match[7] || 0));</div>
<div class="line">    <span class="keywordflow">return</span> date;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> string;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> toInt(str) {</div>
<div class="line">  <span class="keywordflow">return</span> parseInt(str, 10);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> padNumber(num, digits, trim) {</div>
<div class="line">  var neg = <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (num &lt; 0) {</div>
<div class="line">    neg =  <span class="charliteral">&#39;-&#39;</span>;</div>
<div class="line">    num = -num;</div>
<div class="line">  }</div>
<div class="line">  num = <span class="stringliteral">&#39;&#39;</span> + num;</div>
<div class="line">  <span class="keywordflow">while</span> (num.length &lt; digits) num = <span class="charliteral">&#39;0&#39;</span> + num;</div>
<div class="line">  <span class="keywordflow">if</span> (trim) {</div>
<div class="line">    num = num.substr(num.length - digits);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> neg + num;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.TzDate = <span class="keyword">function</span>(offset, timestamp) {</div>
<div class="line">  var <span class="keyword">self</span> = <span class="keyword">new</span> Date(0);</div>
<div class="line">  <span class="keywordflow">if</span> (angular.isString(timestamp)) {</div>
<div class="line">    var tsStr = timestamp;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">self</span>.origDate = jsonStringToDate(timestamp);</div>
<div class="line"></div>
<div class="line">    timestamp = <span class="keyword">self</span>.origDate.getTime();</div>
<div class="line">    <span class="keywordflow">if</span> (isNaN(timestamp)) {</div>
<div class="line">      <span class="keywordflow">throw</span> {</div>
<div class="line">        name: <span class="stringliteral">&quot;Illegal Argument&quot;</span>,</div>
<div class="line">        message: <span class="stringliteral">&quot;Arg &#39;&quot;</span> + tsStr + <span class="stringliteral">&quot;&#39; passed into TzDate constructor is not a valid date string&quot;</span></div>
<div class="line">      };</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keyword">self</span>.origDate = <span class="keyword">new</span> Date(timestamp);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  var localOffset = <span class="keyword">new</span> Date(timestamp).getTimezoneOffset();</div>
<div class="line">  <span class="keyword">self</span>.offsetDiff = localOffset * 60 * 1000 - offset * 1000 * 60 * 60;</div>
<div class="line">  <span class="keyword">self</span>.date = <span class="keyword">new</span> Date(timestamp + <span class="keyword">self</span>.offsetDiff);</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getTime = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getTime() - <span class="keyword">self</span>.offsetDiff;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.toLocaleDateString = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.toLocaleDateString();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getFullYear = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getFullYear();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getMonth = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getMonth();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getDate = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getDate();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getHours = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getHours();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getMinutes = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getMinutes();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getSeconds = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getSeconds();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getMilliseconds = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getMilliseconds();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getTimezoneOffset = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> offset * 60;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCFullYear = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCFullYear();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCMonth = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCMonth();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCDate = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCDate();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCHours = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCHours();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCMinutes = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCMinutes();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCSeconds = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCSeconds();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getUTCMilliseconds = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.origDate.getUTCMilliseconds();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">self</span>.getDay = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.date.getDay();</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="comment">// provide this method only on browsers that already have it</span></div>
<div class="line">  <span class="keywordflow">if</span> (<span class="keyword">self</span>.toISOString) {</div>
<div class="line">    <span class="keyword">self</span>.toISOString = <span class="keyword">function</span>() {</div>
<div class="line">      <span class="keywordflow">return</span> padNumber(<span class="keyword">self</span>.origDate.getUTCFullYear(), 4) + <span class="charliteral">&#39;-&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCMonth() + 1, 2) + <span class="charliteral">&#39;-&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCDate(), 2) + <span class="charliteral">&#39;T&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCHours(), 2) + <span class="charliteral">&#39;:&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCMinutes(), 2) + <span class="charliteral">&#39;:&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCSeconds(), 2) + <span class="charliteral">&#39;.&#39;</span> +</div>
<div class="line">            padNumber(<span class="keyword">self</span>.origDate.getUTCMilliseconds(), 3) + <span class="charliteral">&#39;Z&#39;</span>;</div>
<div class="line">    };</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">//hide all methods not implemented in this mock that the Date prototype exposes</span></div>
<div class="line">  var unimplementedMethods = [<span class="stringliteral">&#39;getUTCDay&#39;</span>,</div>
<div class="line">      <span class="stringliteral">&#39;getYear&#39;</span>, <span class="stringliteral">&#39;setDate&#39;</span>, <span class="stringliteral">&#39;setFullYear&#39;</span>, <span class="stringliteral">&#39;setHours&#39;</span>, <span class="stringliteral">&#39;setMilliseconds&#39;</span>,</div>
<div class="line">      <span class="stringliteral">&#39;setMinutes&#39;</span>, <span class="stringliteral">&#39;setMonth&#39;</span>, <span class="stringliteral">&#39;setSeconds&#39;</span>, <span class="stringliteral">&#39;setTime&#39;</span>, <span class="stringliteral">&#39;setUTCDate&#39;</span>, <span class="stringliteral">&#39;setUTCFullYear&#39;</span>,</div>
<div class="line">      <span class="stringliteral">&#39;setUTCHours&#39;</span>, <span class="stringliteral">&#39;setUTCMilliseconds&#39;</span>, <span class="stringliteral">&#39;setUTCMinutes&#39;</span>, <span class="stringliteral">&#39;setUTCMonth&#39;</span>, <span class="stringliteral">&#39;setUTCSeconds&#39;</span>,</div>
<div class="line">      <span class="stringliteral">&#39;setYear&#39;</span>, <span class="stringliteral">&#39;toDateString&#39;</span>, <span class="stringliteral">&#39;toGMTString&#39;</span>, <span class="stringliteral">&#39;toJSON&#39;</span>, <span class="stringliteral">&#39;toLocaleFormat&#39;</span>, <span class="stringliteral">&#39;toLocaleString&#39;</span>,</div>
<div class="line">      <span class="stringliteral">&#39;toLocaleTimeString&#39;</span>, <span class="stringliteral">&#39;toSource&#39;</span>, <span class="stringliteral">&#39;toString&#39;</span>, <span class="stringliteral">&#39;toTimeString&#39;</span>, <span class="stringliteral">&#39;toUTCString&#39;</span>, <span class="stringliteral">&#39;valueOf&#39;</span>];</div>
<div class="line"></div>
<div class="line">  angular.forEach(unimplementedMethods, <span class="keyword">function</span>(methodName) {</div>
<div class="line">    <span class="keyword">self</span>[methodName] = <span class="keyword">function</span>() {</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&quot;Method &#39;&quot;</span> + methodName + <span class="stringliteral">&quot;&#39; is not implemented in the TzDate mock&quot;</span>);</div>
<div class="line">    };</div>
<div class="line">  });</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">self</span>;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">//make &quot;tzDateInstance instanceof Date&quot; return true</span></div>
<div class="line">angular.mock.TzDate.prototype = Date.prototype;</div>
<div class="line"><span class="comment">/* jshint +W101 */</span></div>
<div class="line"></div>
<div class="line">angular.mock.animate = angular.module(<span class="stringliteral">&#39;ngAnimateMock&#39;</span>, [<span class="stringliteral">&#39;ng&#39;</span>])</div>
<div class="line"></div>
<div class="line">  .config([<span class="stringliteral">&#39;$provide&#39;</span>, <span class="keyword">function</span>($provide) {</div>
<div class="line"></div>
<div class="line">    $provide.factory(<span class="stringliteral">&#39;$$forceReflow&#39;</span>, <span class="keyword">function</span>() {</div>
<div class="line">      <span class="keyword">function</span> reflowFn() {</div>
<div class="line">        reflowFn.totalReflows++;</div>
<div class="line">      }</div>
<div class="line">      reflowFn.totalReflows = 0;</div>
<div class="line">      <span class="keywordflow">return</span> reflowFn;</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    $provide.decorator(<span class="stringliteral">&#39;$animate&#39;</span>, [<span class="stringliteral">&#39;$delegate&#39;</span>, <span class="stringliteral">&#39;$timeout&#39;</span>, <span class="stringliteral">&#39;$browser&#39;</span>, <span class="stringliteral">&#39;$$rAF&#39;</span>, <span class="stringliteral">&#39;$$forceReflow&#39;</span>,</div>
<div class="line">                            <span class="keyword">function</span>($delegate,   $timeout,   $browser,   $$rAF,   $$forceReflow) {</div>
<div class="line"></div>
<div class="line">      var animate = {</div>
<div class="line">        queue: [],</div>
<div class="line">        cancel: $delegate.cancel,</div>
<div class="line">        <span class="keyword">get</span> reflows() {</div>
<div class="line">          <span class="keywordflow">return</span> $$forceReflow.totalReflows;</div>
<div class="line">        },</div>
<div class="line">        enabled: $delegate.enabled,</div>
<div class="line">        triggerCallbackEvents: <span class="keyword">function</span>() {</div>
<div class="line">          $$rAF.flush();</div>
<div class="line">        },</div>
<div class="line">        triggerCallbackPromise: <span class="keyword">function</span>() {</div>
<div class="line">          $timeout.flush(0);</div>
<div class="line">        },</div>
<div class="line">        triggerCallbacks: <span class="keyword">function</span>() {</div>
<div class="line">          this.triggerCallbackEvents();</div>
<div class="line">          this.triggerCallbackPromise();</div>
<div class="line">        }</div>
<div class="line">      };</div>
<div class="line"></div>
<div class="line">      angular.forEach(</div>
<div class="line">        [<span class="stringliteral">&#39;animate&#39;</span>,<span class="stringliteral">&#39;enter&#39;</span>,<span class="stringliteral">&#39;leave&#39;</span>,<span class="stringliteral">&#39;move&#39;</span>,<span class="stringliteral">&#39;addClass&#39;</span>,<span class="stringliteral">&#39;removeClass&#39;</span>,<span class="stringliteral">&#39;setClass&#39;</span>], <span class="keyword">function</span>(method) {</div>
<div class="line">        animate[method] = <span class="keyword">function</span>() {</div>
<div class="line">          animate.queue.push({</div>
<div class="line">            <span class="keyword">event</span>: method,</div>
<div class="line">            element: arguments[0],</div>
<div class="line">            options: arguments[arguments.length - 1],</div>
<div class="line">            args: arguments</div>
<div class="line">          });</div>
<div class="line">          <span class="keywordflow">return</span> $delegate[method].apply($delegate, arguments);</div>
<div class="line">        };</div>
<div class="line">      });</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">return</span> animate;</div>
<div class="line">    }]);</div>
<div class="line"></div>
<div class="line">  }]);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.dump = <span class="keyword">function</span>(object) {</div>
<div class="line">  <span class="keywordflow">return</span> serialize(<span class="keywordtype">object</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> serialize(<span class="keywordtype">object</span>) {</div>
<div class="line">    var out;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (angular.isElement(<span class="keywordtype">object</span>)) {</div>
<div class="line">      <span class="keywordtype">object</span> = angular.element(<span class="keywordtype">object</span>);</div>
<div class="line">      out = angular.element(<span class="stringliteral">&#39;&lt;div&gt;&lt;/div&gt;&#39;</span>);</div>
<div class="line">      angular.forEach(<span class="keywordtype">object</span>, <span class="keyword">function</span>(element) {</div>
<div class="line">        out.append(angular.element(element).clone());</div>
<div class="line">      });</div>
<div class="line">      out = out.html();</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (angular.isArray(<span class="keywordtype">object</span>)) {</div>
<div class="line">      out = [];</div>
<div class="line">      angular.forEach(<span class="keywordtype">object</span>, <span class="keyword">function</span>(o) {</div>
<div class="line">        out.push(serialize(o));</div>
<div class="line">      });</div>
<div class="line">      out = <span class="stringliteral">&#39;[ &#39;</span> + out.join(<span class="stringliteral">&#39;, &#39;</span>) + <span class="stringliteral">&#39; ]&#39;</span>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (angular.isObject(<span class="keywordtype">object</span>)) {</div>
<div class="line">      <span class="keywordflow">if</span> (angular.isFunction(<span class="keywordtype">object</span>.$eval) &amp;&amp; angular.isFunction(<span class="keywordtype">object</span>.$apply)) {</div>
<div class="line">        out = serializeScope(<span class="keywordtype">object</span>);</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">object</span> instanceof Error) {</div>
<div class="line">        out = <span class="keywordtype">object</span>.stack || (<span class="stringliteral">&#39;&#39;</span> + <span class="keywordtype">object</span>.name + <span class="stringliteral">&#39;: &#39;</span> + <span class="keywordtype">object</span>.message);</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// TODO(i): this prevents methods being logged,</span></div>
<div class="line">        <span class="comment">// we should have a better way to serialize objects</span></div>
<div class="line">        out = angular.toJson(<span class="keywordtype">object</span>, <span class="keyword">true</span>);</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      out = String(<span class="keywordtype">object</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> out;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> serializeScope(scope, offset) {</div>
<div class="line">    offset = offset ||  <span class="stringliteral">&#39;  &#39;</span>;</div>
<div class="line">    var log = [offset + <span class="stringliteral">&#39;Scope(&#39;</span> + scope.$id + <span class="stringliteral">&#39;): {&#39;</span>];</div>
<div class="line">    <span class="keywordflow">for</span> (var key in scope) {</div>
<div class="line">      <span class="keywordflow">if</span> (Object.prototype.hasOwnProperty.call(scope, key) &amp;&amp; !key.match(/^(\$|<span class="keyword">this</span>)/)) {</div>
<div class="line">        log.push(<span class="stringliteral">&#39;  &#39;</span> + key + <span class="stringliteral">&#39;: &#39;</span> + angular.toJson(scope[key]));</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    var child = scope.$$childHead;</div>
<div class="line">    <span class="keywordflow">while</span> (child) {</div>
<div class="line">      log.push(serializeScope(child, offset + <span class="stringliteral">&#39;  &#39;</span>));</div>
<div class="line">      child = child.$$nextSibling;</div>
<div class="line">    }</div>
<div class="line">    log.push(<span class="charliteral">&#39;}&#39;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> log.join(<span class="charliteral">&#39;\n&#39;</span> + offset);</div>
<div class="line">  }</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">angular.mock.$HttpBackendProvider = <span class="keyword">function</span>() {</div>
<div class="line">  this.$get = [<span class="stringliteral">&#39;$rootScope&#39;</span>, <span class="stringliteral">&#39;$timeout&#39;</span>, createHttpBackendMock];</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> createHttpBackendMock($rootScope, $timeout, $delegate, $browser) {</div>
<div class="line">  var definitions = [],</div>
<div class="line">      expectations = [],</div>
<div class="line">      responses = [],</div>
<div class="line">      responsesPush = angular.bind(responses, responses.push),</div>
<div class="line">      copy = angular.copy;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> createResponse(status, data, headers, statusText) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isFunction(status)) <span class="keywordflow">return</span> status;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">function</span>() {</div>
<div class="line">      <span class="keywordflow">return</span> angular.isNumber(status)</div>
<div class="line">          ? [status, data, headers, statusText]</div>
<div class="line">          : [200, status, data, headers];</div>
<div class="line">    };</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// TODO(vojta): change params to: method, url, data, headers, callback</span></div>
<div class="line">  <span class="keyword">function</span> $httpBackend(method, url, data, callback, headers, timeout, withCredentials) {</div>
<div class="line">    var xhr = <span class="keyword">new</span> MockXhr(),</div>
<div class="line">        expectation = expectations[0],</div>
<div class="line">        wasExpected = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> prettyPrint(data) {</div>
<div class="line">      <span class="keywordflow">return</span> (angular.isString(data) || angular.isFunction(data) || data instanceof RegExp)</div>
<div class="line">          ? data</div>
<div class="line">          : angular.toJson(data);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> wrapResponse(wrapped) {</div>
<div class="line">      <span class="keywordflow">if</span> (!$browser &amp;&amp; timeout) {</div>
<div class="line">        timeout.then ? timeout.then(handleTimeout) : $timeout(handleTimeout, timeout);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">return</span> handleResponse;</div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> handleResponse() {</div>
<div class="line">        var response = wrapped.response(method, url, data, headers);</div>
<div class="line">        xhr.$$respHeaders = response[2];</div>
<div class="line">        callback(copy(response[0]), copy(response[1]), xhr.getAllResponseHeaders(),</div>
<div class="line">                 copy(response[3] || <span class="stringliteral">&#39;&#39;</span>));</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> handleTimeout() {</div>
<div class="line">        <span class="keywordflow">for</span> (var i = 0, ii = responses.length; i &lt; ii; i++) {</div>
<div class="line">          <span class="keywordflow">if</span> (responses[i] === handleResponse) {</div>
<div class="line">            responses.splice(i, 1);</div>
<div class="line">            callback(-1, undefined, <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (expectation &amp;&amp; expectation.match(method, url)) {</div>
<div class="line">      <span class="keywordflow">if</span> (!expectation.matchData(data)) {</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Expected &#39;</span> + expectation + <span class="stringliteral">&#39; with different data\n&#39;</span> +</div>
<div class="line">            <span class="stringliteral">&#39;EXPECTED: &#39;</span> + prettyPrint(expectation.data) + <span class="stringliteral">&#39;\nGOT:      &#39;</span> + data);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (!expectation.matchHeaders(headers)) {</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Expected &#39;</span> + expectation + <span class="stringliteral">&#39; with different headers\n&#39;</span> +</div>
<div class="line">                        <span class="stringliteral">&#39;EXPECTED: &#39;</span> + prettyPrint(expectation.headers) + <span class="stringliteral">&#39;\nGOT:      &#39;</span> +</div>
<div class="line">                        prettyPrint(headers));</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      expectations.shift();</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (expectation.response) {</div>
<div class="line">        responses.push(wrapResponse(expectation));</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">      }</div>
<div class="line">      wasExpected = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    var i = -1, definition;</div>
<div class="line">    <span class="keywordflow">while</span> ((definition = definitions[++i])) {</div>
<div class="line">      <span class="keywordflow">if</span> (definition.match(method, url, data, headers || {})) {</div>
<div class="line">        <span class="keywordflow">if</span> (definition.response) {</div>
<div class="line">          <span class="comment">// if $browser specified, we do auto flush all requests</span></div>
<div class="line">          ($browser ? $browser.defer : responsesPush)(wrapResponse(definition));</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (definition.passThrough) {</div>
<div class="line">          $delegate(method, url, data, callback, headers, timeout, withCredentials);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No response defined !&#39;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">throw</span> wasExpected ?</div>
<div class="line">        <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No response defined !&#39;</span>) :</div>
<div class="line">        <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Unexpected request: &#39;</span> + method + <span class="charliteral">&#39; &#39;</span> + url + <span class="charliteral">&#39;\n&#39;</span> +</div>
<div class="line">                  (expectation ? <span class="stringliteral">&#39;Expected &#39;</span> + expectation : <span class="stringliteral">&#39;No more request expected&#39;</span>));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  $httpBackend.when = <span class="keyword">function</span>(method, url, data, headers) {</div>
<div class="line">    var definition = <span class="keyword">new</span> MockHttpExpectation(method, url, data, headers),</div>
<div class="line">        chain = {</div>
<div class="line">          respond: <span class="keyword">function</span>(status, data, headers, statusText) {</div>
<div class="line">            definition.passThrough = undefined;</div>
<div class="line">            definition.response = createResponse(status, data, headers, statusText);</div>
<div class="line">            <span class="keywordflow">return</span> chain;</div>
<div class="line">          }</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ($browser) {</div>
<div class="line">      chain.passThrough = <span class="keyword">function</span>() {</div>
<div class="line">        definition.response = undefined;</div>
<div class="line">        definition.passThrough = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">return</span> chain;</div>
<div class="line">      };</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    definitions.push(definition);</div>
<div class="line">    <span class="keywordflow">return</span> chain;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  createShortMethods(<span class="stringliteral">&#39;when&#39;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  $httpBackend.expect = <span class="keyword">function</span>(method, url, data, headers) {</div>
<div class="line">    var expectation = <span class="keyword">new</span> MockHttpExpectation(method, url, data, headers),</div>
<div class="line">        chain = {</div>
<div class="line">          respond: <span class="keyword">function</span>(status, data, headers, statusText) {</div>
<div class="line">            expectation.response = createResponse(status, data, headers, statusText);</div>
<div class="line">            <span class="keywordflow">return</span> chain;</div>
<div class="line">          }</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">    expectations.push(expectation);</div>
<div class="line">    <span class="keywordflow">return</span> chain;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  createShortMethods(<span class="stringliteral">&#39;expect&#39;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  $httpBackend.flush = <span class="keyword">function</span>(count, digest) {</div>
<div class="line">    <span class="keywordflow">if</span> (digest !== <span class="keyword">false</span>) $rootScope.$digest();</div>
<div class="line">    <span class="keywordflow">if</span> (!responses.length) <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No pending request to flush !&#39;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (angular.isDefined(count) &amp;&amp; count !== null) {</div>
<div class="line">      <span class="keywordflow">while</span> (count--) {</div>
<div class="line">        <span class="keywordflow">if</span> (!responses.length) <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No more pending request to flush !&#39;</span>);</div>
<div class="line">        responses.shift()();</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">while</span> (responses.length) {</div>
<div class="line">        responses.shift()();</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    $httpBackend.verifyNoOutstandingExpectation(digest);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  $httpBackend.verifyNoOutstandingExpectation = <span class="keyword">function</span>(digest) {</div>
<div class="line">    <span class="keywordflow">if</span> (digest !== <span class="keyword">false</span>) $rootScope.$digest();</div>
<div class="line">    <span class="keywordflow">if</span> (expectations.length) {</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Unsatisfied requests: &#39;</span> + expectations.join(<span class="stringliteral">&#39;, &#39;</span>));</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  $httpBackend.verifyNoOutstandingRequest = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">if</span> (responses.length) {</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Unflushed requests: &#39;</span> + responses.length);</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  $httpBackend.resetExpectations = <span class="keyword">function</span>() {</div>
<div class="line">    expectations.length = 0;</div>
<div class="line">    responses.length = 0;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $httpBackend;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> createShortMethods(prefix) {</div>
<div class="line">    angular.forEach([<span class="stringliteral">&#39;GET&#39;</span>, <span class="stringliteral">&#39;DELETE&#39;</span>, <span class="stringliteral">&#39;JSONP&#39;</span>, <span class="stringliteral">&#39;HEAD&#39;</span>], <span class="keyword">function</span>(method) {</div>
<div class="line">     $httpBackend[prefix + method] = <span class="keyword">function</span>(url, headers) {</div>
<div class="line">       <span class="keywordflow">return</span> $httpBackend[prefix](method, url, undefined, headers);</div>
<div class="line">     };</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    angular.forEach([<span class="stringliteral">&#39;PUT&#39;</span>, <span class="stringliteral">&#39;POST&#39;</span>, <span class="stringliteral">&#39;PATCH&#39;</span>], <span class="keyword">function</span>(method) {</div>
<div class="line">      $httpBackend[prefix + method] = <span class="keyword">function</span>(url, data, headers) {</div>
<div class="line">        <span class="keywordflow">return</span> $httpBackend[prefix](method, url, data, headers);</div>
<div class="line">      };</div>
<div class="line">    });</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> MockHttpExpectation(method, url, data, headers) {</div>
<div class="line"></div>
<div class="line">  this.data = data;</div>
<div class="line">  this.headers = headers;</div>
<div class="line"></div>
<div class="line">  this.match = <span class="keyword">function</span>(m, u, d, h) {</div>
<div class="line">    <span class="keywordflow">if</span> (method != m) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (!this.matchUrl(u)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isDefined(d) &amp;&amp; !this.matchData(d)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isDefined(h) &amp;&amp; !this.matchHeaders(h)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.matchUrl = <span class="keyword">function</span>(u) {</div>
<div class="line">    <span class="keywordflow">if</span> (!url) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isFunction(url.test)) <span class="keywordflow">return</span> url.test(u);</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isFunction(url)) <span class="keywordflow">return</span> url(u);</div>
<div class="line">    <span class="keywordflow">return</span> url == u;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.matchHeaders = <span class="keyword">function</span>(h) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isUndefined(headers)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isFunction(headers)) <span class="keywordflow">return</span> headers(h);</div>
<div class="line">    <span class="keywordflow">return</span> angular.equals(headers, h);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.matchData = <span class="keyword">function</span>(d) {</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isUndefined(data)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (data &amp;&amp; angular.isFunction(data.test)) <span class="keywordflow">return</span> data.test(d);</div>
<div class="line">    <span class="keywordflow">if</span> (data &amp;&amp; angular.isFunction(data)) <span class="keywordflow">return</span> data(d);</div>
<div class="line">    <span class="keywordflow">if</span> (data &amp;&amp; !angular.isString(data)) {</div>
<div class="line">      <span class="keywordflow">return</span> angular.equals(angular.fromJson(angular.toJson(data)), angular.fromJson(d));</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> data == d;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.toString = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> method + <span class="charliteral">&#39; &#39;</span> + url;</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> createMockXhr() {</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">new</span> MockXhr();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> MockXhr() {</div>
<div class="line"></div>
<div class="line">  <span class="comment">// hack for testing $http, $httpBackend</span></div>
<div class="line">  MockXhr.$$lastInstance = <span class="keyword">this</span>;</div>
<div class="line"></div>
<div class="line">  this.open = <span class="keyword">function</span>(method, url, async) {</div>
<div class="line">    this.$$method = method;</div>
<div class="line">    this.$$url = url;</div>
<div class="line">    this.$$async = async;</div>
<div class="line">    this.$$reqHeaders = {};</div>
<div class="line">    this.$$respHeaders = {};</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.send = <span class="keyword">function</span>(data) {</div>
<div class="line">    this.$$data = data;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.setRequestHeader = <span class="keyword">function</span>(key, value) {</div>
<div class="line">    this.$$reqHeaders[key] = value;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.getResponseHeader = <span class="keyword">function</span>(name) {</div>
<div class="line">    <span class="comment">// the lookup must be case insensitive,</span></div>
<div class="line">    <span class="comment">// that&#39;s why we try two quick lookups first and full scan last</span></div>
<div class="line">    var header = this.$$respHeaders[name];</div>
<div class="line">    <span class="keywordflow">if</span> (header) <span class="keywordflow">return</span> header;</div>
<div class="line"></div>
<div class="line">    name = angular.lowercase(name);</div>
<div class="line">    header = this.$$respHeaders[name];</div>
<div class="line">    <span class="keywordflow">if</span> (header) <span class="keywordflow">return</span> header;</div>
<div class="line"></div>
<div class="line">    header = undefined;</div>
<div class="line">    angular.forEach(this.$$respHeaders, <span class="keyword">function</span>(headerVal, headerName) {</div>
<div class="line">      <span class="keywordflow">if</span> (!header &amp;&amp; angular.lowercase(headerName) == name) header = headerVal;</div>
<div class="line">    });</div>
<div class="line">    <span class="keywordflow">return</span> header;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.getAllResponseHeaders = <span class="keyword">function</span>() {</div>
<div class="line">    var lines = [];</div>
<div class="line"></div>
<div class="line">    angular.forEach(this.$$respHeaders, <span class="keyword">function</span>(value, key) {</div>
<div class="line">      lines.push(key + <span class="stringliteral">&#39;: &#39;</span> + value);</div>
<div class="line">    });</div>
<div class="line">    <span class="keywordflow">return</span> lines.join(<span class="charliteral">&#39;\n&#39;</span>);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.abort = angular.noop;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.$TimeoutDecorator = [<span class="stringliteral">&#39;$delegate&#39;</span>, <span class="stringliteral">&#39;$browser&#39;</span>, <span class="keyword">function</span>($delegate, $browser) {</div>
<div class="line"></div>
<div class="line">  $delegate.flush = <span class="keyword">function</span>(delay) {</div>
<div class="line">    $browser.defer.flush(delay);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  $delegate.verifyNoPendingTasks = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">if</span> ($browser.deferredFns.length) {</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Deferred tasks to flush (&#39;</span> + $browser.deferredFns.length + <span class="stringliteral">&#39;): &#39;</span> +</div>
<div class="line">          formatPendingTasksAsString($browser.deferredFns));</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> formatPendingTasksAsString(tasks) {</div>
<div class="line">    var result = [];</div>
<div class="line">    angular.forEach(tasks, <span class="keyword">function</span>(task) {</div>
<div class="line">      result.push(<span class="stringliteral">&#39;{id: &#39;</span> + task.id + <span class="stringliteral">&#39;, &#39;</span> + <span class="stringliteral">&#39;time: &#39;</span> + task.time + <span class="charliteral">&#39;}&#39;</span>);</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> result.join(<span class="stringliteral">&#39;, &#39;</span>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $delegate;</div>
<div class="line">}];</div>
<div class="line"></div>
<div class="line">angular.mock.$RAFDecorator = [<span class="stringliteral">&#39;$delegate&#39;</span>, <span class="keyword">function</span>($delegate) {</div>
<div class="line">  var queue = [];</div>
<div class="line">  var rafFn = <span class="keyword">function</span>(fn) {</div>
<div class="line">    var index = queue.length;</div>
<div class="line">    queue.push(fn);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">function</span>() {</div>
<div class="line">      queue.splice(index, 1);</div>
<div class="line">    };</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  rafFn.supported = $delegate.supported;</div>
<div class="line"></div>
<div class="line">  rafFn.flush = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">if</span> (queue.length === 0) {</div>
<div class="line">      <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;No rAF callbacks present&#39;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    var length = queue.length;</div>
<div class="line">    <span class="keywordflow">for</span> (var i = 0; i &lt; length; i++) {</div>
<div class="line">      queue[i]();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    queue = queue.slice(i);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> rafFn;</div>
<div class="line">}];</div>
<div class="line"></div>
<div class="line">angular.mock.$RootElementProvider = <span class="keyword">function</span>() {</div>
<div class="line">  this.$get = <span class="keyword">function</span>() {</div>
<div class="line">    <span class="keywordflow">return</span> angular.element(<span class="stringliteral">&#39;&lt;div ng-app&gt;&lt;/div&gt;&#39;</span>);</div>
<div class="line">  };</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line">angular.mock.$ControllerDecorator = [<span class="stringliteral">&#39;$delegate&#39;</span>, <span class="keyword">function</span>($delegate) {</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">function</span>(expression, locals, later, ident) {</div>
<div class="line">    <span class="keywordflow">if</span> (later &amp;&amp; typeof later === <span class="stringliteral">&#39;object&#39;</span>) {</div>
<div class="line">      var create = $delegate(expression, locals, <span class="keyword">true</span>, ident);</div>
<div class="line">      angular.extend(create.instance, later);</div>
<div class="line">      <span class="keywordflow">return</span> create();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> $delegate(expression, locals, later, ident);</div>
<div class="line">  };</div>
<div class="line">}];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.module(<span class="stringliteral">&#39;ngMock&#39;</span>, [<span class="stringliteral">&#39;ng&#39;</span>]).provider({</div>
<div class="line">  $browser: angular.mock.$BrowserProvider,</div>
<div class="line">  $exceptionHandler: angular.mock.$ExceptionHandlerProvider,</div>
<div class="line">  $log: angular.mock.$LogProvider,</div>
<div class="line">  $interval: angular.mock.$IntervalProvider,</div>
<div class="line">  $httpBackend: angular.mock.$HttpBackendProvider,</div>
<div class="line">  $rootElement: angular.mock.$RootElementProvider</div>
<div class="line">}).config([<span class="stringliteral">&#39;$provide&#39;</span>, <span class="keyword">function</span>($provide) {</div>
<div class="line">  $provide.decorator(<span class="stringliteral">&#39;$timeout&#39;</span>, angular.mock.$TimeoutDecorator);</div>
<div class="line">  $provide.decorator(<span class="stringliteral">&#39;$$rAF&#39;</span>, angular.mock.$RAFDecorator);</div>
<div class="line">  $provide.decorator(<span class="stringliteral">&#39;$rootScope&#39;</span>, angular.mock.$RootScopeDecorator);</div>
<div class="line">  $provide.decorator(<span class="stringliteral">&#39;$controller&#39;</span>, angular.mock.$ControllerDecorator);</div>
<div class="line">}]);</div>
<div class="line"></div>
<div class="line">angular.module(<span class="stringliteral">&#39;ngMockE2E&#39;</span>, [<span class="stringliteral">&#39;ng&#39;</span>]).config([<span class="stringliteral">&#39;$provide&#39;</span>, <span class="keyword">function</span>($provide) {</div>
<div class="line">  $provide.decorator(<span class="stringliteral">&#39;$httpBackend&#39;</span>, angular.mock.e2e.$httpBackendDecorator);</div>
<div class="line">}]);</div>
<div class="line"></div>
<div class="line">angular.mock.e2e = {};</div>
<div class="line">angular.mock.e2e.$httpBackendDecorator =</div>
<div class="line">  [<span class="stringliteral">&#39;$rootScope&#39;</span>, <span class="stringliteral">&#39;$timeout&#39;</span>, <span class="stringliteral">&#39;$delegate&#39;</span>, <span class="stringliteral">&#39;$browser&#39;</span>, createHttpBackendMock];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">angular.mock.$RootScopeDecorator = [<span class="stringliteral">&#39;$delegate&#39;</span>, <span class="keyword">function</span>($delegate) {</div>
<div class="line"></div>
<div class="line">  var $rootScopePrototype = Object.getPrototypeOf($delegate);</div>
<div class="line"></div>
<div class="line">  $rootScopePrototype.$countChildScopes = countChildScopes;</div>
<div class="line">  $rootScopePrototype.$countWatchers = countWatchers;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> $delegate;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// ------------------------------------------------------------------------------------------ //</span></div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> countChildScopes() {</div>
<div class="line">    <span class="comment">// jshint validthis: true</span></div>
<div class="line">    var count = 0; <span class="comment">// exclude the current scope</span></div>
<div class="line">    var pendingChildHeads = [this.$$childHead];</div>
<div class="line">    var currentScope;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (pendingChildHeads.length) {</div>
<div class="line">      currentScope = pendingChildHeads.shift();</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">while</span> (currentScope) {</div>
<div class="line">        count += 1;</div>
<div class="line">        pendingChildHeads.push(currentScope.$$childHead);</div>
<div class="line">        currentScope = currentScope.$$nextSibling;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> count;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> countWatchers() {</div>
<div class="line">    <span class="comment">// jshint validthis: true</span></div>
<div class="line">    var count = this.$$watchers ? this.$$watchers.length : 0; <span class="comment">// include the current scope</span></div>
<div class="line">    var pendingChildHeads = [this.$$childHead];</div>
<div class="line">    var currentScope;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">while</span> (pendingChildHeads.length) {</div>
<div class="line">      currentScope = pendingChildHeads.shift();</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">while</span> (currentScope) {</div>
<div class="line">        count += currentScope.$$watchers ? currentScope.$$watchers.length : 0;</div>
<div class="line">        pendingChildHeads.push(currentScope.$$childHead);</div>
<div class="line">        currentScope = currentScope.$$nextSibling;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> count;</div>
<div class="line">  }</div>
<div class="line">}];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (window.jasmine || window.mocha) {</div>
<div class="line"></div>
<div class="line">  var currentSpec = null,</div>
<div class="line">      annotatedFunctions = [],</div>
<div class="line">      isSpecRunning = <span class="keyword">function</span>() {</div>
<div class="line">        <span class="keywordflow">return</span> !!currentSpec;</div>
<div class="line">      };</div>
<div class="line"></div>
<div class="line">  angular.mock.$$annotate = angular.injector.$$annotate;</div>
<div class="line">  angular.injector.$$annotate = <span class="keyword">function</span>(fn) {</div>
<div class="line">    <span class="keywordflow">if</span> (typeof fn === <span class="stringliteral">&#39;function&#39;</span> &amp;&amp; !fn.$inject) {</div>
<div class="line">      annotatedFunctions.push(fn);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> angular.mock.$$annotate.apply(<span class="keyword">this</span>, arguments);</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  (window.beforeEach || window.setup)(<span class="keyword">function</span>() {</div>
<div class="line">    annotatedFunctions = [];</div>
<div class="line">    currentSpec = <span class="keyword">this</span>;</div>
<div class="line">  });</div>
<div class="line"></div>
<div class="line">  (window.afterEach || window.teardown)(<span class="keyword">function</span>() {</div>
<div class="line">    var injector = currentSpec.$injector;</div>
<div class="line"></div>
<div class="line">    annotatedFunctions.forEach(<span class="keyword">function</span>(fn) {</div>
<div class="line">      <span class="keyword">delete</span> fn.$inject;</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    angular.forEach(currentSpec.$modules, <span class="keyword">function</span>(module) {</div>
<div class="line">      if (module &amp;&amp; module.$$hashKey) {</div>
<div class="line">        module.$$hashKey = undefined;</div>
<div class="line">      }</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    currentSpec.$injector = null;</div>
<div class="line">    currentSpec.$modules = null;</div>
<div class="line">    currentSpec = null;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (injector) {</div>
<div class="line">      injector.get(<span class="stringliteral">&#39;$rootElement&#39;</span>).off();</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// clean up jquery&#39;s fragment cache</span></div>
<div class="line">    angular.forEach(angular.element.fragments, <span class="keyword">function</span>(val, key) {</div>
<div class="line">      delete angular.element.fragments[key];</div>
<div class="line">    });</div>
<div class="line"></div>
<div class="line">    MockXhr.$$lastInstance = null;</div>
<div class="line"></div>
<div class="line">    angular.forEach(angular.callbacks, <span class="keyword">function</span>(val, key) {</div>
<div class="line">      delete angular.callbacks[key];</div>
<div class="line">    });</div>
<div class="line">    angular.callbacks.counter = 0;</div>
<div class="line">  });</div>
<div class="line"></div>
<div class="line">  window.module = angular.mock.module = <span class="keyword">function</span>() {</div>
<div class="line">    var moduleFns = Array.prototype.slice.call(arguments, 0);</div>
<div class="line">    <span class="keywordflow">return</span> isSpecRunning() ? workFn() : workFn;</div>
<div class="line">    <span class="keyword">function</span> workFn() {</div>
<div class="line">      <span class="keywordflow">if</span> (currentSpec.$injector) {</div>
<div class="line">        <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Injector already created, can not register a module!&#39;</span>);</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        var modules = currentSpec.$modules || (currentSpec.$modules = []);</div>
<div class="line">        angular.forEach(moduleFns, <span class="keyword">function</span>(module) {</div>
<div class="line">          <span class="keywordflow">if</span> (angular.isObject(module) &amp;&amp; !angular.isArray(module)) {</div>
<div class="line">            modules.push(<span class="keyword">function</span>($provide) {</div>
<div class="line">              angular.forEach(module, <span class="keyword">function</span>(value, key) {</div>
<div class="line">                $provide.value(key, value);</div>
<div class="line">              });</div>
<div class="line">            });</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            modules.push(module);</div>
<div class="line">          }</div>
<div class="line">        });</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  var ErrorAddingDeclarationLocationStack = <span class="keyword">function</span>(e, errorForStack) {</div>
<div class="line">    this.message = e.message;</div>
<div class="line">    this.name = e.name;</div>
<div class="line">    <span class="keywordflow">if</span> (e.line) this.line = e.line;</div>
<div class="line">    <span class="keywordflow">if</span> (e.sourceId) this.sourceId = e.sourceId;</div>
<div class="line">    <span class="keywordflow">if</span> (e.stack &amp;&amp; errorForStack)</div>
<div class="line">      this.stack = e.stack + <span class="charliteral">&#39;\n&#39;</span> + errorForStack.stack;</div>
<div class="line">    <span class="keywordflow">if</span> (e.stackArray) this.stackArray = e.stackArray;</div>
<div class="line">  };</div>
<div class="line">  ErrorAddingDeclarationLocationStack.prototype.toString = Error.prototype.toString;</div>
<div class="line"></div>
<div class="line">  window.inject = angular.mock.inject = <span class="keyword">function</span>() {</div>
<div class="line">    var blockFns = Array.prototype.slice.call(arguments, 0);</div>
<div class="line">    var errorForStack = <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Declaration Location&#39;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> isSpecRunning() ? workFn.call(currentSpec) : workFn;</div>
<div class="line">    <span class="keyword">function</span> workFn() {</div>
<div class="line">      var modules = currentSpec.$modules || [];</div>
<div class="line">      var strictDi = !!currentSpec.$injectorStrict;</div>
<div class="line">      modules.unshift(<span class="stringliteral">&#39;ngMock&#39;</span>);</div>
<div class="line">      modules.unshift(<span class="stringliteral">&#39;ng&#39;</span>);</div>
<div class="line">      var injector = currentSpec.$injector;</div>
<div class="line">      <span class="keywordflow">if</span> (!injector) {</div>
<div class="line">        <span class="keywordflow">if</span> (strictDi) {</div>
<div class="line">          <span class="comment">// If strictDi is enabled, annotate the providerInjector blocks</span></div>
<div class="line">          angular.forEach(modules, <span class="keyword">function</span>(moduleFn) {</div>
<div class="line">            <span class="keywordflow">if</span> (typeof moduleFn === <span class="stringliteral">&quot;function&quot;</span>) {</div>
<div class="line">              angular.injector.$$annotate(moduleFn);</div>
<div class="line">            }</div>
<div class="line">          });</div>
<div class="line">        }</div>
<div class="line">        injector = currentSpec.$injector = angular.injector(modules, strictDi);</div>
<div class="line">        currentSpec.$injectorStrict = strictDi;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">for</span> (var i = 0, ii = blockFns.length; i &lt; ii; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (currentSpec.$injectorStrict) {</div>
<div class="line">          <span class="comment">// If the injector is strict / strictDi, and the spec wants to inject using automatic</span></div>
<div class="line">          <span class="comment">// annotation, then annotate the function here.</span></div>
<div class="line">          injector.annotate(blockFns[i]);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">          <span class="comment">/* jshint -W040 */</span><span class="comment">/* Jasmine explicitly provides a `this` object when calling functions */</span></div>
<div class="line">          injector.invoke(blockFns[i] || angular.noop, <span class="keyword">this</span>);</div>
<div class="line">          <span class="comment">/* jshint +W040 */</span></div>
<div class="line">        } <span class="keywordflow">catch</span> (e) {</div>
<div class="line">          <span class="keywordflow">if</span> (e.stack &amp;&amp; errorForStack) {</div>
<div class="line">            <span class="keywordflow">throw</span> <span class="keyword">new</span> ErrorAddingDeclarationLocationStack(e, errorForStack);</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">throw</span> e;</div>
<div class="line">        } <span class="keywordflow">finally</span> {</div>
<div class="line">          errorForStack = null;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  angular.mock.inject.strictDi = <span class="keyword">function</span>(value) {</div>
<div class="line">    value = arguments.length ? !!value : <span class="keyword">true</span>;</div>
<div class="line">    <span class="keywordflow">return</span> isSpecRunning() ? workFn() : workFn;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> workFn() {</div>
<div class="line">      <span class="keywordflow">if</span> (value !== currentSpec.$injectorStrict) {</div>
<div class="line">        <span class="keywordflow">if</span> (currentSpec.$injector) {</div>
<div class="line">          <span class="keywordflow">throw</span> <span class="keyword">new</span> Error(<span class="stringliteral">&#39;Injector already created, can not modify strict annotations&#39;</span>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          currentSpec.$injectorStrict = value;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">})(window, window.angular);</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
