<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>WisR web applikation: C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-messages.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WisR web applikation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-messages.js</div>  </div>
</div><!--header-->
<div class="contents">
<p>&lt;file name="index.html"&gt; &lt;form name="myForm"&gt; &lt;label&gt; Enter your name: &lt;input type="text" name="myName" ng-model="name" ng-minlength="5" ng-maxlength="20" required=""&gt; &lt;/label&gt; </p><pre>myForm.myName.$error = {{ myForm.myName.$error | json }}</pre><div ng-messages="myForm.myName.$error" style="color:maroon" role="alert"> <div ng-message="required">You did not enter a field</div> <div ng-message="minlength">Your field is too short</div> <div ng-message="maxlength">Your field is too long</div> </div><p> &lt;/form&gt; &lt;/file&gt; &lt;file name="script.js"&gt; angular.module('ngMessagesExample', ['ngMessages']); &lt;/file&gt; </p>
<div class="fragment"><div class="line"></div>
<div class="line">(<span class="keyword">function</span>(window, angular, undefined) {<span class="stringliteral">&#39;use strict&#39;</span>;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* jshint ignore:start */</span></div>
<div class="line"><span class="comment">// this code is in the core, but not in angular-messages.js</span></div>
<div class="line">var isArray = angular.isArray;</div>
<div class="line">var forEach = angular.forEach;</div>
<div class="line">var isString = angular.isString;</div>
<div class="line">var jqLite = angular.element;</div>
<div class="line"><span class="comment">/* jshint ignore:end */</span></div>
<div class="line"></div>
<div class="line">angular.module(<span class="stringliteral">&#39;ngMessages&#39;</span>, [])</div>
<div class="line"></div>
<div class="line">   .directive(<span class="stringliteral">&#39;ngMessages&#39;</span>, [<span class="stringliteral">&#39;$animate&#39;</span>, <span class="keyword">function</span>($animate) {</div>
<div class="line">     var ACTIVE_CLASS = <span class="stringliteral">&#39;ng-active&#39;</span>;</div>
<div class="line">     var INACTIVE_CLASS = <span class="stringliteral">&#39;ng-inactive&#39;</span>;</div>
<div class="line"></div>
<div class="line">     <span class="keywordflow">return</span> {</div>
<div class="line">       require: <span class="stringliteral">&#39;ngMessages&#39;</span>,</div>
<div class="line">       restrict: <span class="stringliteral">&#39;AE&#39;</span>,</div>
<div class="line">       controller: [<span class="stringliteral">&#39;$element&#39;</span>, <span class="stringliteral">&#39;$scope&#39;</span>, <span class="stringliteral">&#39;$attrs&#39;</span>, <span class="keyword">function</span>($element, $scope, $attrs) {</div>
<div class="line">         var ctrl = <span class="keyword">this</span>;</div>
<div class="line">         var latestKey = 0;</div>
<div class="line"></div>
<div class="line">         var messages = this.messages = {};</div>
<div class="line">         var renderLater, cachedCollection;</div>
<div class="line"></div>
<div class="line">         this.render = <span class="keyword">function</span>(collection) {</div>
<div class="line">           collection = collection || {};</div>
<div class="line"></div>
<div class="line">           renderLater = <span class="keyword">false</span>;</div>
<div class="line">           cachedCollection = collection;</div>
<div class="line"></div>
<div class="line">           <span class="comment">// this is true if the attribute is empty or if the attribute value is truthy</span></div>
<div class="line">           var multiple = isAttrTruthy($scope, $attrs.ngMessagesMultiple) ||</div>
<div class="line">                          isAttrTruthy($scope, $attrs.multiple);</div>
<div class="line"></div>
<div class="line">           var unmatchedMessages = [];</div>
<div class="line">           var matchedKeys = {};</div>
<div class="line">           var messageItem = ctrl.head;</div>
<div class="line">           var messageFound = <span class="keyword">false</span>;</div>
<div class="line">           var totalMessages = 0;</div>
<div class="line"></div>
<div class="line">           <span class="comment">// we use != instead of !== to allow for both undefined and null values</span></div>
<div class="line">           <span class="keywordflow">while</span> (messageItem != null) {</div>
<div class="line">             totalMessages++;</div>
<div class="line">             var messageCtrl = messageItem.message;</div>
<div class="line"></div>
<div class="line">             var messageUsed = <span class="keyword">false</span>;</div>
<div class="line">             <span class="keywordflow">if</span> (!messageFound) {</div>
<div class="line">               forEach(collection, <span class="keyword">function</span>(value, key) {</div>
<div class="line">                 <span class="keywordflow">if</span> (!messageUsed &amp;&amp; truthy(value) &amp;&amp; messageCtrl.test(key)) {</div>
<div class="line">                   <span class="comment">// this is to prevent the same error name from showing up twice</span></div>
<div class="line">                   <span class="keywordflow">if</span> (matchedKeys[key]) <span class="keywordflow">return</span>;</div>
<div class="line">                   matchedKeys[key] = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">                   messageUsed = <span class="keyword">true</span>;</div>
<div class="line">                   messageCtrl.attach();</div>
<div class="line">                 }</div>
<div class="line">               });</div>
<div class="line">             }</div>
<div class="line"></div>
<div class="line">             <span class="keywordflow">if</span> (messageUsed) {</div>
<div class="line">               <span class="comment">// unless we want to display multiple messages then we should</span></div>
<div class="line">               <span class="comment">// set a flag here to avoid displaying the next message in the list</span></div>
<div class="line">               messageFound = !multiple;</div>
<div class="line">             } <span class="keywordflow">else</span> {</div>
<div class="line">               unmatchedMessages.push(messageCtrl);</div>
<div class="line">             }</div>
<div class="line"></div>
<div class="line">             messageItem = messageItem.next;</div>
<div class="line">           }</div>
<div class="line"></div>
<div class="line">           forEach(unmatchedMessages, <span class="keyword">function</span>(messageCtrl) {</div>
<div class="line">             messageCtrl.detach();</div>
<div class="line">           });</div>
<div class="line"></div>
<div class="line">           unmatchedMessages.length !== totalMessages</div>
<div class="line">              ? $animate.setClass($element, ACTIVE_CLASS, INACTIVE_CLASS)</div>
<div class="line">              : $animate.setClass($element, INACTIVE_CLASS, ACTIVE_CLASS);</div>
<div class="line">         };</div>
<div class="line"></div>
<div class="line">         $scope.$watchCollection($attrs.ngMessages || $attrs[<span class="stringliteral">&#39;for&#39;</span>], ctrl.render);</div>
<div class="line"></div>
<div class="line">         this.reRender = <span class="keyword">function</span>() {</div>
<div class="line">           <span class="keywordflow">if</span> (!renderLater) {</div>
<div class="line">             renderLater = <span class="keyword">true</span>;</div>
<div class="line">             $scope.$evalAsync(<span class="keyword">function</span>() {</div>
<div class="line">               <span class="keywordflow">if</span> (renderLater) {</div>
<div class="line">                 cachedCollection &amp;&amp; ctrl.render(cachedCollection);</div>
<div class="line">               }</div>
<div class="line">             });</div>
<div class="line">           }</div>
<div class="line">         };</div>
<div class="line"></div>
<div class="line">         this.<span class="keyword">register</span> = <span class="keyword">function</span>(comment, messageCtrl) {</div>
<div class="line">           var nextKey = latestKey.toString();</div>
<div class="line">           messages[nextKey] = {</div>
<div class="line">             message: messageCtrl</div>
<div class="line">           };</div>
<div class="line">           insertMessageNode($element[0], comment, nextKey);</div>
<div class="line">           comment.$$ngMessageNode = nextKey;</div>
<div class="line">           latestKey++;</div>
<div class="line"></div>
<div class="line">           ctrl.reRender();</div>
<div class="line">         };</div>
<div class="line"></div>
<div class="line">         this.deregister = <span class="keyword">function</span>(comment) {</div>
<div class="line">           var key = comment.$$ngMessageNode;</div>
<div class="line">           <span class="keyword">delete</span> comment.$$ngMessageNode;</div>
<div class="line">           removeMessageNode($element[0], comment, key);</div>
<div class="line">           <span class="keyword">delete</span> messages[key];</div>
<div class="line">           ctrl.reRender();</div>
<div class="line">         };</div>
<div class="line"></div>
<div class="line">         <span class="keyword">function</span> findPreviousMessage(parent, comment) {</div>
<div class="line">           var prevNode = comment;</div>
<div class="line">           var parentLookup = [];</div>
<div class="line">           <span class="keywordflow">while</span> (prevNode &amp;&amp; prevNode !== parent) {</div>
<div class="line">             var prevKey = prevNode.$$ngMessageNode;</div>
<div class="line">             <span class="keywordflow">if</span> (prevKey &amp;&amp; prevKey.length) {</div>
<div class="line">               <span class="keywordflow">return</span> messages[prevKey];</div>
<div class="line">             }</div>
<div class="line"></div>
<div class="line">             <span class="comment">// dive deeper into the DOM and examine its children for any ngMessage</span></div>
<div class="line">             <span class="comment">// comments that may be in an element that appears deeper in the list</span></div>
<div class="line">             <span class="keywordflow">if</span> (prevNode.childNodes.length &amp;&amp; parentLookup.indexOf(prevNode) == -1) {</div>
<div class="line">               parentLookup.push(prevNode);</div>
<div class="line">               prevNode = prevNode.childNodes[prevNode.childNodes.length - 1];</div>
<div class="line">             } <span class="keywordflow">else</span> {</div>
<div class="line">               prevNode = prevNode.previousSibling || prevNode.parentNode;</div>
<div class="line">             }</div>
<div class="line">           }</div>
<div class="line">         }</div>
<div class="line"></div>
<div class="line">         <span class="keyword">function</span> insertMessageNode(parent, comment, key) {</div>
<div class="line">           var messageNode = messages[key];</div>
<div class="line">           <span class="keywordflow">if</span> (!ctrl.head) {</div>
<div class="line">             ctrl.head = messageNode;</div>
<div class="line">           } <span class="keywordflow">else</span> {</div>
<div class="line">             var match = findPreviousMessage(parent, comment);</div>
<div class="line">             <span class="keywordflow">if</span> (match) {</div>
<div class="line">               messageNode.next = match.next;</div>
<div class="line">               match.next = messageNode;</div>
<div class="line">             } <span class="keywordflow">else</span> {</div>
<div class="line">               messageNode.next = ctrl.head;</div>
<div class="line">               ctrl.head = messageNode;</div>
<div class="line">             }</div>
<div class="line">           }</div>
<div class="line">         }</div>
<div class="line"></div>
<div class="line">         <span class="keyword">function</span> removeMessageNode(parent, comment, key) {</div>
<div class="line">           var messageNode = messages[key];</div>
<div class="line"></div>
<div class="line">           var match = findPreviousMessage(parent, comment);</div>
<div class="line">           <span class="keywordflow">if</span> (match) {</div>
<div class="line">             match.next = messageNode.next;</div>
<div class="line">           } <span class="keywordflow">else</span> {</div>
<div class="line">             ctrl.head = messageNode.next;</div>
<div class="line">           }</div>
<div class="line">         }</div>
<div class="line">       }]</div>
<div class="line">     };</div>
<div class="line"></div>
<div class="line">     <span class="keyword">function</span> isAttrTruthy(scope, attr) {</div>
<div class="line">      <span class="keywordflow">return</span> (isString(attr) &amp;&amp; attr.length === 0) || <span class="comment">//empty attribute</span></div>
<div class="line">             truthy(scope.$eval(attr));</div>
<div class="line">     }</div>
<div class="line"></div>
<div class="line">     <span class="keyword">function</span> truthy(val) {</div>
<div class="line">       <span class="keywordflow">return</span> isString(val) ? val.length : !!val;</div>
<div class="line">     }</div>
<div class="line">   }])</div>
<div class="line"></div>
<div class="line">   .directive(<span class="stringliteral">&#39;ngMessagesInclude&#39;</span>,</div>
<div class="line">     [<span class="stringliteral">&#39;$templateRequest&#39;</span>, <span class="stringliteral">&#39;$document&#39;</span>, <span class="stringliteral">&#39;$compile&#39;</span>, <span class="keyword">function</span>($templateRequest, $document, $compile) {</div>
<div class="line"></div>
<div class="line">     <span class="keywordflow">return</span> {</div>
<div class="line">       restrict: <span class="stringliteral">&#39;AE&#39;</span>,</div>
<div class="line">       require: <span class="stringliteral">&#39;^^ngMessages&#39;</span>, <span class="comment">// we only require this for validation sake</span></div>
<div class="line">       link: <span class="keyword">function</span>($scope, element, attrs) {</div>
<div class="line">         var src = attrs.ngMessagesInclude || attrs.src;</div>
<div class="line">         $templateRequest(src).then(<span class="keyword">function</span>(html) {</div>
<div class="line">           $compile(html)($scope, <span class="keyword">function</span>(contents) {</div>
<div class="line">             element.after(contents);</div>
<div class="line"></div>
<div class="line">             <span class="comment">// the anchor is placed for debugging purposes</span></div>
<div class="line">             var anchor = jqLite($document[0].createComment(<span class="stringliteral">&#39; ngMessagesInclude: &#39;</span> + src + <span class="charliteral">&#39; &#39;</span>));</div>
<div class="line">             element.after(anchor);</div>
<div class="line"></div>
<div class="line">             <span class="comment">// we don&#39;t want to pollute the DOM anymore by keeping an empty directive element</span></div>
<div class="line">             element.remove();</div>
<div class="line">           });</div>
<div class="line">         });</div>
<div class="line">       }</div>
<div class="line">     };</div>
<div class="line">   }])</div>
<div class="line"></div>
<div class="line">  .directive(<span class="stringliteral">&#39;ngMessage&#39;</span>, ngMessageDirectiveFactory(<span class="stringliteral">&#39;AE&#39;</span>))</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  .directive(<span class="stringliteral">&#39;ngMessageExp&#39;</span>, ngMessageDirectiveFactory(<span class="charliteral">&#39;A&#39;</span>));</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> ngMessageDirectiveFactory(restrict) {</div>
<div class="line">  <span class="keywordflow">return</span> [<span class="stringliteral">&#39;$animate&#39;</span>, <span class="keyword">function</span>($animate) {</div>
<div class="line">    <span class="keywordflow">return</span> {</div>
<div class="line">      restrict: <span class="stringliteral">&#39;AE&#39;</span>,</div>
<div class="line">      transclude: <span class="stringliteral">&#39;element&#39;</span>,</div>
<div class="line">      terminal: <span class="keyword">true</span>,</div>
<div class="line">      require: <span class="stringliteral">&#39;^^ngMessages&#39;</span>,</div>
<div class="line">      link: <span class="keyword">function</span>(scope, element, attrs, ngMessagesCtrl, $transclude) {</div>
<div class="line">        var commentNode = element[0];</div>
<div class="line"></div>
<div class="line">        var records;</div>
<div class="line">        var staticExp = attrs.ngMessage || attrs.when;</div>
<div class="line">        var dynamicExp = attrs.ngMessageExp || attrs.whenExp;</div>
<div class="line">        var assignRecords = <span class="keyword">function</span>(items) {</div>
<div class="line">          records = items</div>
<div class="line">              ? (isArray(items)</div>
<div class="line">                    ? items</div>
<div class="line">                    : items.split(/[\s,]+/))</div>
<div class="line">              : null;</div>
<div class="line">          ngMessagesCtrl.reRender();</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (dynamicExp) {</div>
<div class="line">          assignRecords(scope.$eval(dynamicExp));</div>
<div class="line">          scope.$watchCollection(dynamicExp, assignRecords);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          assignRecords(staticExp);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        var currentElement, messageCtrl;</div>
<div class="line">        ngMessagesCtrl.register(commentNode, messageCtrl = {</div>
<div class="line">          test: <span class="keyword">function</span>(name) {</div>
<div class="line">            <span class="keywordflow">return</span> contains(records, name);</div>
<div class="line">          },</div>
<div class="line">          attach: <span class="keyword">function</span>() {</div>
<div class="line">            <span class="keywordflow">if</span> (!currentElement) {</div>
<div class="line">              $transclude(scope, <span class="keyword">function</span>(elm) {</div>
<div class="line">                $animate.enter(elm, null, element);</div>
<div class="line">                currentElement = elm;</div>
<div class="line"></div>
<div class="line">                <span class="comment">// in the event that the parent element is destroyed</span></div>
<div class="line">                <span class="comment">// by any other structural directive then it&#39;s time</span></div>
<div class="line">                <span class="comment">// to deregister the message from the controller</span></div>
<div class="line">                currentElement.on(<span class="stringliteral">&#39;$destroy&#39;</span>, <span class="keyword">function</span>() {</div>
<div class="line">                  <span class="keywordflow">if</span> (currentElement) {</div>
<div class="line">                    ngMessagesCtrl.deregister(commentNode);</div>
<div class="line">                    messageCtrl.detach();</div>
<div class="line">                  }</div>
<div class="line">                });</div>
<div class="line">              });</div>
<div class="line">            }</div>
<div class="line">          },</div>
<div class="line">          detach: <span class="keyword">function</span>() {</div>
<div class="line">            <span class="keywordflow">if</span> (currentElement) {</div>
<div class="line">              var elm = currentElement;</div>
<div class="line">              currentElement = null;</div>
<div class="line">              $animate.leave(elm);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        });</div>
<div class="line">      }</div>
<div class="line">    };</div>
<div class="line">  }];</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> contains(collection, key) {</div>
<div class="line">    <span class="keywordflow">if</span> (collection) {</div>
<div class="line">      <span class="keywordflow">return</span> isArray(collection)</div>
<div class="line">          ? collection.indexOf(key) &gt;= 0</div>
<div class="line">          : collection.hasOwnProperty(key);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">})(window, window.angular);</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
