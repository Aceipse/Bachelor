<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>WisR web applikation: C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-route.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WisR web applikation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-route.js</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example shows how changing the URL hash causes the <code>$route</code> to match a route against the URL, and the <code>ngView</code> pulls in the partial.</p>
<p>&lt;file name="index.html"&gt; </p><div ng-controller="MainController"> Choose: <a href="Book/Moby">Moby</a> | <a href="Book/Moby/ch/1">Moby: Ch1</a> | <a href="Book/Gatsby">Gatsby</a> | <a href="Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> | <a href="Book/Scarlet">Scarlet Letter</a><br />
</div><div ng-controller="MainController"> <div></div></div><div ng-controller="MainController"> <hr/>
</div><div ng-controller="MainController"> <pre>$location.path() = {{$location.path()}}</pre> <pre>$route.current.templateUrl = {{$route.current.templateUrl}}</pre> <pre>$route.current.params = {{$route.current.params}}</pre> <pre>$route.current.scope.name = {{$route.current.scope.name}}</pre> <pre>$routeParams = {{$routeParams}}</pre> </div><p> &lt;/file&gt;</p>
<p>&lt;file name="book.html"&gt; controller: {{name}}<br />
 Book Id: {{params.bookId}}<br />
 &lt;/file&gt;</p>
<p>&lt;file name="chapter.html"&gt; controller: {{name}}<br />
 Book Id: {{params.bookId}}<br />
 Chapter Id: {{params.chapterId}} &lt;/file&gt;</p>
<p>&lt;file name="script.js"&gt; angular.module('ngRouteExample', ['ngRoute'])</p>
<p>.controller('MainController', function($scope, $route, $routeParams, $location) { $scope.$route = $route; $scope.$location = $location; $scope.$routeParams = $routeParams; })</p>
<p>.controller('BookController', function($scope, $routeParams) { $scope.name = "BookController"; $scope.params = $routeParams; })</p>
<p>.controller('ChapterController', function($scope, $routeParams) { $scope.name = "ChapterController"; $scope.params = $routeParams; })</p>
<p>.config(function($routeProvider, $locationProvider) { $routeProvider .when('/Book/:bookId', { templateUrl: 'book.html', controller: 'BookController', resolve: { // I will cause a 1 second delay delay: function($q, $timeout) { var delay = $q.defer(); $timeout(delay.resolve, 1000); return delay.promise; } } }) .when('/Book/:bookId/ch/:chapterId', { templateUrl: 'chapter.html', controller: 'ChapterController' });</p>
<p>// configure html5 to get links working on jsfiddle $locationProvider.html5Mode(true); });</p>
<p>&lt;/file&gt;</p>
<p>&lt;file name="protractor.js" type="protractor"&gt; it('should load and compile correct template', function() { element(by.linkText('Moby: Ch1')).click(); var content = element(by.css('[ng-view]')).getText(); expect(content).toMatch(/controller\: ChapterController/); expect(content).toMatch(/Book Id\: Moby/); expect(content).toMatch(/Chapter Id\: 1/);</p>
<p>element(by.partialLinkText('Scarlet')).click();</p>
<p>content = element(by.css('[ng-view]')).getText(); expect(content).toMatch(/controller\: BookController/); expect(content).toMatch(/Book Id\: Scarlet/); }); &lt;/file&gt; </p>
<div class="fragment"><div class="line"></div>
<div class="line">(<span class="keyword">function</span>(window, angular, undefined) {<span class="stringliteral">&#39;use strict&#39;</span>;</div>
<div class="line"></div>
<div class="line"> <span class="comment">/* global -ngRouteModule */</span></div>
<div class="line">var ngRouteModule = angular.module(<span class="stringliteral">&#39;ngRoute&#39;</span>, [<span class="stringliteral">&#39;ng&#39;</span>]).</div>
<div class="line">                        provider(<span class="stringliteral">&#39;$route&#39;</span>, $RouteProvider),</div>
<div class="line">    $routeMinErr = angular.$$minErr(<span class="stringliteral">&#39;ngRoute&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> $RouteProvider() {</div>
<div class="line">  <span class="keyword">function</span> inherit(parent, extra) {</div>
<div class="line">    <span class="keywordflow">return</span> angular.extend(Object.create(parent), extra);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  var routes = {};</div>
<div class="line"></div>
<div class="line">  this.when = <span class="keyword">function</span>(path, route) {</div>
<div class="line">    <span class="comment">//copy original route object to preserve params inherited from proto chain</span></div>
<div class="line">    var routeCopy = angular.copy(route);</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isUndefined(routeCopy.reloadOnSearch)) {</div>
<div class="line">      routeCopy.reloadOnSearch = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (angular.isUndefined(routeCopy.caseInsensitiveMatch)) {</div>
<div class="line">      routeCopy.caseInsensitiveMatch = this.caseInsensitiveMatch;</div>
<div class="line">    }</div>
<div class="line">    routes[path] = angular.extend(</div>
<div class="line">      routeCopy,</div>
<div class="line">      path &amp;&amp; pathRegExp(path, routeCopy)</div>
<div class="line">    );</div>
<div class="line"></div>
<div class="line">    <span class="comment">// create redirection for trailing slashes</span></div>
<div class="line">    <span class="keywordflow">if</span> (path) {</div>
<div class="line">      var redirectPath = (path[path.length - 1] == <span class="charliteral">&#39;/&#39;</span>)</div>
<div class="line">            ? path.substr(0, path.length - 1)</div>
<div class="line">            : path + <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"></div>
<div class="line">      routes[redirectPath] = angular.extend(</div>
<div class="line">        {redirectTo: path},</div>
<div class="line">        pathRegExp(redirectPath, routeCopy)</div>
<div class="line">      );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line">  this.caseInsensitiveMatch = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">function</span> pathRegExp(path, opts) {</div>
<div class="line">    var insensitive = opts.caseInsensitiveMatch,</div>
<div class="line">        ret = {</div>
<div class="line">          originalPath: path,</div>
<div class="line">          regexp: path</div>
<div class="line">        },</div>
<div class="line">        keys = ret.keys = [];</div>
<div class="line"></div>
<div class="line">    path = path</div>
<div class="line">      .replace(/([().])/g, <span class="stringliteral">&#39;\\$1&#39;</span>)</div>
<div class="line">      .replace(/(\/)?:(\w+)([\?\*])?/g, <span class="keyword">function</span>(_, slash, key, option) {</div>
<div class="line">        var optional = option === <span class="charliteral">&#39;?&#39;</span> ? option : null;</div>
<div class="line">        var star = option === <span class="charliteral">&#39;*&#39;</span> ? option : null;</div>
<div class="line">        keys.push({ name: key, optional: !!optional });</div>
<div class="line">        slash = slash || <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&#39;&#39;</span></div>
<div class="line">          + (optional ? <span class="stringliteral">&#39;&#39;</span> : slash)</div>
<div class="line">          + <span class="stringliteral">&#39;(?:&#39;</span></div>
<div class="line">          + (optional ? slash : <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line">          + (star &amp;&amp; <span class="stringliteral">&#39;(.+?)&#39;</span> || <span class="stringliteral">&#39;([^/]+)&#39;</span>)</div>
<div class="line">          + (optional || <span class="stringliteral">&#39;&#39;</span>)</div>
<div class="line">          + <span class="charliteral">&#39;)&#39;</span></div>
<div class="line">          + (optional || <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">      })</div>
<div class="line">      .replace(/([\/$\*])/g, <span class="stringliteral">&#39;\\$1&#39;</span>);</div>
<div class="line"></div>
<div class="line">    ret.regexp = <span class="keyword">new</span> RegExp(<span class="charliteral">&#39;^&#39;</span> + path + <span class="charliteral">&#39;$&#39;</span>, insensitive ? <span class="charliteral">&#39;i&#39;</span> : <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  this.otherwise = <span class="keyword">function</span>(params) {</div>
<div class="line">    <span class="keywordflow">if</span> (typeof params === <span class="stringliteral">&#39;string&#39;</span>) {</div>
<div class="line">      params = {redirectTo: params};</div>
<div class="line">    }</div>
<div class="line">    this.when(null, params);</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">this</span>;</div>
<div class="line">  };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  this.$get = [<span class="stringliteral">&#39;$rootScope&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$location&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$routeParams&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$q&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$injector&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$templateRequest&#39;</span>,</div>
<div class="line">               <span class="stringliteral">&#39;$sce&#39;</span>,</div>
<div class="line">      <span class="keyword">function</span>($rootScope, $location, $routeParams, $q, $injector, $templateRequest, $sce) {</div>
<div class="line"></div>
<div class="line">    var forceReload = <span class="keyword">false</span>,</div>
<div class="line">        preparedRoute,</div>
<div class="line">        preparedRouteIsUpdateOnly,</div>
<div class="line">        $route = {</div>
<div class="line">          routes: routes,</div>
<div class="line"></div>
<div class="line">          reload: <span class="keyword">function</span>() {</div>
<div class="line">            forceReload = <span class="keyword">true</span>;</div>
<div class="line">            $rootScope.$evalAsync(<span class="keyword">function</span>() {</div>
<div class="line">              <span class="comment">// Don&#39;t support cancellation of a reload for now...</span></div>
<div class="line">              prepareRoute();</div>
<div class="line">              commitRoute();</div>
<div class="line">            });</div>
<div class="line">          },</div>
<div class="line"></div>
<div class="line">          updateParams: <span class="keyword">function</span>(newParams) {</div>
<div class="line">            <span class="keywordflow">if</span> (this.current &amp;&amp; this.current.$$route) {</div>
<div class="line">              newParams = angular.extend({}, this.current.params, newParams);</div>
<div class="line">              $location.path(interpolate(this.current.$$route.originalPath, newParams));</div>
<div class="line">              <span class="comment">// interpolate modifies newParams, only query params are left</span></div>
<div class="line">              $location.search(newParams);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              <span class="keywordflow">throw</span> $routeMinErr(<span class="stringliteral">&#39;norout&#39;</span>, <span class="stringliteral">&#39;Tried updating route when with no current route&#39;</span>);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">    $rootScope.$on(<span class="stringliteral">&#39;$locationChangeStart&#39;</span>, prepareRoute);</div>
<div class="line">    $rootScope.$on(<span class="stringliteral">&#39;$locationChangeSuccess&#39;</span>, commitRoute);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span> $route;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> switchRouteMatcher(on, route) {</div>
<div class="line">      var keys = route.keys,</div>
<div class="line">          params = {};</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (!route.regexp) <span class="keywordflow">return</span> null;</div>
<div class="line"></div>
<div class="line">      var m = route.regexp.exec(on);</div>
<div class="line">      <span class="keywordflow">if</span> (!m) <span class="keywordflow">return</span> null;</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">for</span> (var i = 1, len = m.length; i &lt; len; ++i) {</div>
<div class="line">        var key = keys[i - 1];</div>
<div class="line"></div>
<div class="line">        var val = m[i];</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> (key &amp;&amp; val) {</div>
<div class="line">          params[key.name] = val;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">return</span> params;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> prepareRoute($locationEvent) {</div>
<div class="line">      var lastRoute = $route.current;</div>
<div class="line"></div>
<div class="line">      preparedRoute = parseRoute();</div>
<div class="line">      preparedRouteIsUpdateOnly = preparedRoute &amp;&amp; lastRoute &amp;&amp; preparedRoute.$$route === lastRoute.$$route</div>
<div class="line">          &amp;&amp; angular.equals(preparedRoute.pathParams, lastRoute.pathParams)</div>
<div class="line">          &amp;&amp; !preparedRoute.reloadOnSearch &amp;&amp; !forceReload;</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (!preparedRouteIsUpdateOnly &amp;&amp; (lastRoute || preparedRoute)) {</div>
<div class="line">        <span class="keywordflow">if</span> ($rootScope.$broadcast(<span class="stringliteral">&#39;$routeChangeStart&#39;</span>, preparedRoute, lastRoute).defaultPrevented) {</div>
<div class="line">          <span class="keywordflow">if</span> ($locationEvent) {</div>
<div class="line">            $locationEvent.preventDefault();</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> commitRoute() {</div>
<div class="line">      var lastRoute = $route.current;</div>
<div class="line">      var nextRoute = preparedRoute;</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (preparedRouteIsUpdateOnly) {</div>
<div class="line">        lastRoute.params = nextRoute.params;</div>
<div class="line">        angular.copy(lastRoute.params, $routeParams);</div>
<div class="line">        $rootScope.$broadcast(<span class="stringliteral">&#39;$routeUpdate&#39;</span>, lastRoute);</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (nextRoute || lastRoute) {</div>
<div class="line">        forceReload = <span class="keyword">false</span>;</div>
<div class="line">        $route.current = nextRoute;</div>
<div class="line">        <span class="keywordflow">if</span> (nextRoute) {</div>
<div class="line">          <span class="keywordflow">if</span> (nextRoute.redirectTo) {</div>
<div class="line">            <span class="keywordflow">if</span> (angular.isString(nextRoute.redirectTo)) {</div>
<div class="line">              $location.path(interpolate(nextRoute.redirectTo, nextRoute.params)).search(nextRoute.params)</div>
<div class="line">                       .replace();</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              $location.url(nextRoute.redirectTo(nextRoute.pathParams, $location.path(), $location.search()))</div>
<div class="line">                       .replace();</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        $q.when(nextRoute).</div>
<div class="line">          then(<span class="keyword">function</span>() {</div>
<div class="line">            <span class="keywordflow">if</span> (nextRoute) {</div>
<div class="line">              var locals = angular.extend({}, nextRoute.resolve),</div>
<div class="line">                  <span class="keyword">template</span>, templateUrl;</div>
<div class="line"></div>
<div class="line">              angular.forEach(locals, <span class="keyword">function</span>(value, key) {</div>
<div class="line">                locals[key] = angular.isString(value) ?</div>
<div class="line">                    $injector.get(value) : $injector.invoke(value, null, null, key);</div>
<div class="line">              });</div>
<div class="line"></div>
<div class="line">              <span class="keywordflow">if</span> (angular.isDefined(<span class="keyword">template</span> = nextRoute.template)) {</div>
<div class="line">                <span class="keywordflow">if</span> (angular.isFunction(<span class="keyword">template</span>)) {</div>
<div class="line">                  <span class="keyword">template</span> = <span class="keyword">template</span>(nextRoute.params);</div>
<div class="line">                }</div>
<div class="line">              } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (angular.isDefined(templateUrl = nextRoute.templateUrl)) {</div>
<div class="line">                <span class="keywordflow">if</span> (angular.isFunction(templateUrl)) {</div>
<div class="line">                  templateUrl = templateUrl(nextRoute.params);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (angular.isDefined(templateUrl)) {</div>
<div class="line">                  nextRoute.loadedTemplateUrl = $sce.valueOf(templateUrl);</div>
<div class="line">                  <span class="keyword">template</span> = $templateRequest(templateUrl);</div>
<div class="line">                }</div>
<div class="line">              }</div>
<div class="line">              <span class="keywordflow">if</span> (angular.isDefined(<span class="keyword">template</span>)) {</div>
<div class="line">                locals[<span class="stringliteral">&#39;$template&#39;</span>] = <span class="keyword">template</span>;</div>
<div class="line">              }</div>
<div class="line">              <span class="keywordflow">return</span> $q.all(locals);</div>
<div class="line">            }</div>
<div class="line">          }).</div>
<div class="line">          then(<span class="keyword">function</span>(locals) {</div>
<div class="line">            <span class="comment">// after route change</span></div>
<div class="line">            <span class="keywordflow">if</span> (nextRoute == $route.current) {</div>
<div class="line">              <span class="keywordflow">if</span> (nextRoute) {</div>
<div class="line">                nextRoute.locals = locals;</div>
<div class="line">                angular.copy(nextRoute.params, $routeParams);</div>
<div class="line">              }</div>
<div class="line">              $rootScope.$broadcast(<span class="stringliteral">&#39;$routeChangeSuccess&#39;</span>, nextRoute, lastRoute);</div>
<div class="line">            }</div>
<div class="line">          }, <span class="keyword">function</span>(error) {</div>
<div class="line">            <span class="keywordflow">if</span> (nextRoute == $route.current) {</div>
<div class="line">              $rootScope.$broadcast(<span class="stringliteral">&#39;$routeChangeError&#39;</span>, nextRoute, lastRoute, error);</div>
<div class="line">            }</div>
<div class="line">          });</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> parseRoute() {</div>
<div class="line">      <span class="comment">// Match a route</span></div>
<div class="line">      var params, match;</div>
<div class="line">      angular.forEach(routes, <span class="keyword">function</span>(route, path) {</div>
<div class="line">        <span class="keywordflow">if</span> (!match &amp;&amp; (params = switchRouteMatcher($location.path(), route))) {</div>
<div class="line">          match = inherit(route, {</div>
<div class="line">            params: angular.extend({}, $location.search(), params),</div>
<div class="line">            pathParams: params});</div>
<div class="line">          match.$$route = route;</div>
<div class="line">        }</div>
<div class="line">      });</div>
<div class="line">      <span class="comment">// No route matched; fallback to &quot;otherwise&quot; route</span></div>
<div class="line">      <span class="keywordflow">return</span> match || routes[null] &amp;&amp; inherit(routes[null], {params: {}, pathParams:{}});</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keyword">function</span> interpolate(<span class="keywordtype">string</span>, params) {</div>
<div class="line">      var result = [];</div>
<div class="line">      angular.forEach((<span class="keywordtype">string</span> || <span class="stringliteral">&#39;&#39;</span>).split(<span class="charliteral">&#39;:&#39;</span>), <span class="keyword">function</span>(segment, i) {</div>
<div class="line">        <span class="keywordflow">if</span> (i === 0) {</div>
<div class="line">          result.push(segment);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          var segmentMatch = segment.match(/(\w+)(?:[?*])?(.*)/);</div>
<div class="line">          var key = segmentMatch[1];</div>
<div class="line">          result.push(params[key]);</div>
<div class="line">          result.push(segmentMatch[2] || <span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">          <span class="keyword">delete</span> params[key];</div>
<div class="line">        }</div>
<div class="line">      });</div>
<div class="line">      <span class="keywordflow">return</span> result.join(<span class="stringliteral">&#39;&#39;</span>);</div>
<div class="line">    }</div>
<div class="line">  }];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">ngRouteModule.provider(<span class="stringliteral">&#39;$routeParams&#39;</span>, $RouteParamsProvider);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> $RouteParamsProvider() {</div>
<div class="line">  this.$get = <span class="keyword">function</span>() { <span class="keywordflow">return</span> {}; };</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">ngRouteModule.directive(<span class="stringliteral">&#39;ngView&#39;</span>, ngViewFactory);</div>
<div class="line">ngRouteModule.directive(<span class="stringliteral">&#39;ngView&#39;</span>, ngViewFillContentFactory);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">ngViewFactory.$inject = [<span class="stringliteral">&#39;$route&#39;</span>, <span class="stringliteral">&#39;$anchorScroll&#39;</span>, <span class="stringliteral">&#39;$animate&#39;</span>];</div>
<div class="line"><span class="keyword">function</span> ngViewFactory($route, $anchorScroll, $animate) {</div>
<div class="line">  <span class="keywordflow">return</span> {</div>
<div class="line">    restrict: <span class="stringliteral">&#39;ECA&#39;</span>,</div>
<div class="line">    terminal: <span class="keyword">true</span>,</div>
<div class="line">    priority: 400,</div>
<div class="line">    transclude: <span class="stringliteral">&#39;element&#39;</span>,</div>
<div class="line">    link: <span class="keyword">function</span>(scope, $element, attr, ctrl, $transclude) {</div>
<div class="line">        var currentScope,</div>
<div class="line">            currentElement,</div>
<div class="line">            previousLeaveAnimation,</div>
<div class="line">            autoScrollExp = attr.autoscroll,</div>
<div class="line">            onloadExp = attr.onload || <span class="stringliteral">&#39;&#39;</span>;</div>
<div class="line"></div>
<div class="line">        scope.$on(<span class="stringliteral">&#39;$routeChangeSuccess&#39;</span>, update);</div>
<div class="line">        update();</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> cleanupLastView() {</div>
<div class="line">          <span class="keywordflow">if</span> (previousLeaveAnimation) {</div>
<div class="line">            $animate.cancel(previousLeaveAnimation);</div>
<div class="line">            previousLeaveAnimation = null;</div>
<div class="line">          }</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">if</span> (currentScope) {</div>
<div class="line">            currentScope.$destroy();</div>
<div class="line">            currentScope = null;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (currentElement) {</div>
<div class="line">            previousLeaveAnimation = $animate.leave(currentElement);</div>
<div class="line">            previousLeaveAnimation.then(<span class="keyword">function</span>() {</div>
<div class="line">              previousLeaveAnimation = null;</div>
<div class="line">            });</div>
<div class="line">            currentElement = null;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> update() {</div>
<div class="line">          var locals = $route.current &amp;&amp; $route.current.locals,</div>
<div class="line">              <span class="keyword">template</span> = locals &amp;&amp; locals.$template;</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">if</span> (angular.isDefined(<span class="keyword">template</span>)) {</div>
<div class="line">            var newScope = scope.$new();</div>
<div class="line">            var current = $route.current;</div>
<div class="line"></div>
<div class="line">            <span class="comment">// Note: This will also link all children of ng-view that were contained in the original</span></div>
<div class="line">            <span class="comment">// html. If that content contains controllers, ... they could pollute/change the scope.</span></div>
<div class="line">            <span class="comment">// However, using ng-view on an element with additional content does not make sense...</span></div>
<div class="line">            <span class="comment">// Note: We can&#39;t remove them in the cloneAttchFn of $transclude as that</span></div>
<div class="line">            <span class="comment">// function is called before linking the content, which would apply child</span></div>
<div class="line">            <span class="comment">// directives to non existing elements.</span></div>
<div class="line">            var clone = $transclude(newScope, <span class="keyword">function</span>(clone) {</div>
<div class="line">              $animate.enter(clone, null, currentElement || $element).then(<span class="keyword">function</span> onNgViewEnter() {</div>
<div class="line">                <span class="keywordflow">if</span> (angular.isDefined(autoScrollExp)</div>
<div class="line">                  &amp;&amp; (!autoScrollExp || scope.$eval(autoScrollExp))) {</div>
<div class="line">                  $anchorScroll();</div>
<div class="line">                }</div>
<div class="line">              });</div>
<div class="line">              cleanupLastView();</div>
<div class="line">            });</div>
<div class="line"></div>
<div class="line">            currentElement = clone;</div>
<div class="line">            currentScope = current.scope = newScope;</div>
<div class="line">            currentScope.$emit(<span class="stringliteral">&#39;$viewContentLoaded&#39;</span>);</div>
<div class="line">            currentScope.$eval(onloadExp);</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            cleanupLastView();</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// This directive is called during the $transclude call of the first `ngView` directive.</span></div>
<div class="line"><span class="comment">// It will replace and compile the content of the element with the loaded template.</span></div>
<div class="line"><span class="comment">// We need this directive so that the element content is already filled when</span></div>
<div class="line"><span class="comment">// the link function of another directive on the same element as ngView</span></div>
<div class="line"><span class="comment">// is called.</span></div>
<div class="line">ngViewFillContentFactory.$inject = [<span class="stringliteral">&#39;$compile&#39;</span>, <span class="stringliteral">&#39;$controller&#39;</span>, <span class="stringliteral">&#39;$route&#39;</span>];</div>
<div class="line"><span class="keyword">function</span> ngViewFillContentFactory($compile, $controller, $route) {</div>
<div class="line">  <span class="keywordflow">return</span> {</div>
<div class="line">    restrict: <span class="stringliteral">&#39;ECA&#39;</span>,</div>
<div class="line">    priority: -400,</div>
<div class="line">    link: <span class="keyword">function</span>(scope, $element) {</div>
<div class="line">      var current = $route.current,</div>
<div class="line">          locals = current.locals;</div>
<div class="line"></div>
<div class="line">      $element.html(locals.$template);</div>
<div class="line"></div>
<div class="line">      var link = $compile($element.contents());</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (current.controller) {</div>
<div class="line">        locals.$scope = scope;</div>
<div class="line">        var controller = $controller(current.controller, locals);</div>
<div class="line">        <span class="keywordflow">if</span> (current.controllerAs) {</div>
<div class="line">          scope[current.controllerAs] = controller;</div>
<div class="line">        }</div>
<div class="line">        $element.data(<span class="stringliteral">&#39;$ngControllerController&#39;</span>, controller);</div>
<div class="line">        $element.children().data(<span class="stringliteral">&#39;$ngControllerController&#39;</span>, controller);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      link(scope);</div>
<div class="line">    }</div>
<div class="line">  };</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">})(window, window.angular);</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
