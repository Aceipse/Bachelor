<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>WisR web applikation: C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-resource.js</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WisR web applikation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">C:/Users/martin/Documents/GitHubVisualStudio/Bachelor/WisR/WisR/Scripts/angular-resource.js</div>  </div>
</div><!--header-->
<div class="contents">
<h1>Credit card resource</h1>
<ul>
<li><p class="startli">```js // Define CreditCard class var CreditCard = $resource('/user/:userId/card/:cardId', {userId:123, cardId:''}, { charge: {method:'POST', params:{charge:true}} });</p>
<p class="startli">// We can retrieve a collection from the server var cards = CreditCard.query(function() { // GET: /user/123/card // server returns: [ {id:456, number:'1234', name:'Smith'} ];</p>
<p class="startli">var card = cards[0]; // each item is an instance of CreditCard expect(card instanceof CreditCard).toEqual(true); card.name = "J. Smith"; // non GET methods are mapped onto the instances card.$save(); // POST: /user/123/card/456 {id:456, number:'1234', name:'J. Smith'} // server returns: {id:456, number:'1234', name: 'J. Smith'};</p>
<p class="startli">// our custom method is mapped as well. card.$charge({amount:9.99}); // POST: /user/123/card/456?amount=9.99&amp;charge=true {id:456, number:'1234', name:'J. Smith'} });</p>
<p class="startli">// we can create an instance as well var newCard = new CreditCard({number:'0123'}); newCard.name = "Mike Smith"; newCard.$save(); // POST: /user/123/card {number:'0123', name:'Mike Smith'} // server returns: {id:789, number:'0123', name: 'Mike Smith'}; expect(newCard.id).toEqual(789);</p>
</li>
<li><p class="startli">```</p>
<p class="startli">The object returned from this function execution is a resource "class" which has "static" method for each action in the definition.</p>
<p class="startli">Calling these methods invoke <code>$http</code> on the <code>url</code> template with the given <code>method</code>, <code>params</code> and <code>headers</code>. When the data is returned from the server then the object is an instance of the resource type and all of the non-GET methods are available with <code>$</code> prefix. This allows you to easily support CRUD operations (create, read, update, delete) on server-side data.</p>
</li>
</ul>
<div class="fragment"><div class="line">var User = $resource(<span class="stringliteral">&#39;/user/:userId&#39;</span>, {userId:<span class="stringliteral">&#39;@id&#39;</span>});</div>
<div class="line">User.get({userId:123}, <span class="keyword">function</span>(user) {</div>
<div class="line">  user.abc = <span class="keyword">true</span>;</div>
<div class="line">  user.$save();</div>
<div class="line">});</div>
</div><!-- fragment --><p>It's worth noting that the success callback for <code>get</code>, <code>query</code> and other methods gets passed in the response that came from the server as well as $http header getter function, so one could rewrite the above example and get access to http headers as:</p>
<div class="fragment"><div class="line">var User = $resource(<span class="stringliteral">&#39;/user/:userId&#39;</span>, {userId:<span class="stringliteral">&#39;@id&#39;</span>});</div>
<div class="line">User.get({userId:123}, <span class="keyword">function</span>(u, getResponseHeaders){</div>
<div class="line">  u.abc = <span class="keyword">true</span>;</div>
<div class="line">  u.$save(<span class="keyword">function</span>(u, putResponseHeaders) {</div>
<div class="line">    <span class="comment">//u =&gt; saved user object</span></div>
<div class="line">    <span class="comment">//putResponseHeaders =&gt; $http header getter</span></div>
<div class="line">  });</div>
<div class="line">});</div>
</div><!-- fragment --><p>You can also access the raw <code>$http</code> promise via the <code>$promise</code> property on the object returned</p>
<div class="fragment"><div class="line">var User = $resource(<span class="stringliteral">&#39;/user/:userId&#39;</span>, {userId:<span class="stringliteral">&#39;@id&#39;</span>});</div>
<div class="line">User.get({userId:123})</div>
<div class="line">    .$promise.then(<span class="keyword">function</span>(user) {</div>
<div class="line">      $scope.user = user;</div>
<div class="line">    });</div>
</div><!-- fragment --><h1>Creating a custom 'PUT' request</h1>
<p>In this example we create a custom method on our resource to make a PUT request</p><ul>
<li><p class="startli">```js var app = angular.module('app', ['ngResource', 'ngRoute']);</p>
<p class="startli">// Some APIs expect a PUT request in the format URL/object/ID // Here we are creating an 'update' method app.factory('Notes', ['$resource', function($resource) { return $resource('/notes/:id', null, { 'update': { method:'PUT' } }); }]);</p>
<p class="startli">// In our controller we get the ID from the URL using ngRoute and $routeParams // We pass in $routeParams and our Notes factory along with $scope app.controller('NotesCtrl', ['$scope', '$routeParams', 'Notes', function($scope, $routeParams, Notes) { // First get a note object from the factory var note = Notes.get({ id:$routeParams.id }); $id = note.id;</p>
<p class="startli">// Now call update passing in the ID first then the object you are updating Notes.update({ id:$id }, note);</p>
<p class="startli">// This will PUT /notes/ID with the note object in the request payload }]);</p>
</li>
<li>```</li>
</ul>
<div class="fragment"><div class="line"></div>
<div class="line">(<span class="keyword">function</span>(window, angular, undefined) {<span class="stringliteral">&#39;use strict&#39;</span>;</div>
<div class="line"></div>
<div class="line">var $resourceMinErr = angular.$$minErr(<span class="stringliteral">&#39;$resource&#39;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Helper functions and regex to lookup a dotted path on an object</span></div>
<div class="line"><span class="comment">// stopping at undefined/null.  The path must be composed of ASCII</span></div>
<div class="line"><span class="comment">// identifiers (just like $parse)</span></div>
<div class="line">var MEMBER_NAME_REGEX = /^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> isValidDottedPath(path) {</div>
<div class="line">  <span class="keywordflow">return</span> (path != null &amp;&amp; path !== <span class="stringliteral">&#39;&#39;</span> &amp;&amp; path !== <span class="stringliteral">&#39;hasOwnProperty&#39;</span> &amp;&amp;</div>
<div class="line">      MEMBER_NAME_REGEX.test(<span class="charliteral">&#39;.&#39;</span> + path));</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> lookupDottedPath(obj, path) {</div>
<div class="line">  <span class="keywordflow">if</span> (!isValidDottedPath(path)) {</div>
<div class="line">    <span class="keywordflow">throw</span> $resourceMinErr(<span class="stringliteral">&#39;badmember&#39;</span>, <span class="stringliteral">&#39;Dotted member path &quot;@{0}&quot; is invalid.&#39;</span>, path);</div>
<div class="line">  }</div>
<div class="line">  var keys = path.split(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (var i = 0, ii = keys.length; i &lt; ii &amp;&amp; obj !== undefined; i++) {</div>
<div class="line">    var key = keys[i];</div>
<div class="line">    obj = (obj !== null) ? obj[key] : undefined;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> obj;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">function</span> shallowClearAndCopy(src, dst) {</div>
<div class="line">  dst = dst || {};</div>
<div class="line"></div>
<div class="line">  angular.forEach(dst, <span class="keyword">function</span>(value, key) {</div>
<div class="line">    <span class="keyword">delete</span> dst[key];</div>
<div class="line">  });</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (var key in src) {</div>
<div class="line">    <span class="keywordflow">if</span> (src.hasOwnProperty(key) &amp;&amp; !(key.charAt(0) === <span class="charliteral">&#39;$&#39;</span> &amp;&amp; key.charAt(1) === <span class="charliteral">&#39;$&#39;</span>)) {</div>
<div class="line">      dst[key] = src[key];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> dst;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">angular.module(<span class="stringliteral">&#39;ngResource&#39;</span>, [<span class="stringliteral">&#39;ng&#39;</span>]).</div>
<div class="line">  provider(<span class="stringliteral">&#39;$resource&#39;</span>, <span class="keyword">function</span>() {</div>
<div class="line">    var provider = <span class="keyword">this</span>;</div>
<div class="line"></div>
<div class="line">    this.defaults = {</div>
<div class="line">      <span class="comment">// Strip slashes by default</span></div>
<div class="line">      stripTrailingSlashes: <span class="keyword">true</span>,</div>
<div class="line"></div>
<div class="line">      <span class="comment">// Default actions configuration</span></div>
<div class="line">      actions: {</div>
<div class="line">        <span class="stringliteral">&#39;get&#39;</span>: {method: <span class="stringliteral">&#39;GET&#39;</span>},</div>
<div class="line">        <span class="stringliteral">&#39;save&#39;</span>: {method: <span class="stringliteral">&#39;POST&#39;</span>},</div>
<div class="line">        <span class="stringliteral">&#39;query&#39;</span>: {method: <span class="stringliteral">&#39;GET&#39;</span>, isArray: <span class="keyword">true</span>},</div>
<div class="line">        <span class="stringliteral">&#39;remove&#39;</span>: {method: <span class="stringliteral">&#39;DELETE&#39;</span>},</div>
<div class="line">        <span class="stringliteral">&#39;delete&#39;</span>: {method: <span class="stringliteral">&#39;DELETE&#39;</span>}</div>
<div class="line">      }</div>
<div class="line">    };</div>
<div class="line"></div>
<div class="line">    this.$get = [<span class="stringliteral">&#39;$http&#39;</span>, <span class="stringliteral">&#39;$q&#39;</span>, <span class="keyword">function</span>($http, $q) {</div>
<div class="line"></div>
<div class="line">      var noop = angular.noop,</div>
<div class="line">        forEach = angular.forEach,</div>
<div class="line">        extend = angular.extend,</div>
<div class="line">        copy = angular.copy,</div>
<div class="line">        isFunction = angular.isFunction;</div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> encodeUriSegment(val) {</div>
<div class="line">        <span class="keywordflow">return</span> encodeUriQuery(val, <span class="keyword">true</span>).</div>
<div class="line">          replace(/%26/gi, <span class="charliteral">&#39;&amp;&#39;</span>).</div>
<div class="line">          replace(/%3D/gi, <span class="charliteral">&#39;=&#39;</span>).</div>
<div class="line">          replace(/%2B/gi, <span class="charliteral">&#39;+&#39;</span>);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> encodeUriQuery(val, pctEncodeSpaces) {</div>
<div class="line">        <span class="keywordflow">return</span> encodeURIComponent(val).</div>
<div class="line">          replace(/%40/gi, <span class="charliteral">&#39;@&#39;</span>).</div>
<div class="line">          replace(/%3A/gi, <span class="charliteral">&#39;:&#39;</span>).</div>
<div class="line">          replace(/%24/g, <span class="charliteral">&#39;$&#39;</span>).</div>
<div class="line">          replace(/%2C/gi, <span class="charliteral">&#39;,&#39;</span>).</div>
<div class="line">          replace(/%20/g, (pctEncodeSpaces ? <span class="stringliteral">&#39;%20&#39;</span> : <span class="charliteral">&#39;+&#39;</span>));</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> Route(<span class="keyword">template</span>, defaults) {</div>
<div class="line">        this.<span class="keyword">template</span> = <span class="keyword">template</span>;</div>
<div class="line">        this.defaults = extend({}, provider.defaults, defaults);</div>
<div class="line">        this.urlParams = {};</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      Route.prototype = {</div>
<div class="line">        setUrlParams: <span class="keyword">function</span>(config, params, actionUrl) {</div>
<div class="line">          var <span class="keyword">self</span> = <span class="keyword">this</span>,</div>
<div class="line">            url = actionUrl || <span class="keyword">self</span>.template,</div>
<div class="line">            val,</div>
<div class="line">            encodedVal;</div>
<div class="line"></div>
<div class="line">          var urlParams = <span class="keyword">self</span>.urlParams = {};</div>
<div class="line">          forEach(url.split(/\W/), <span class="keyword">function</span>(param) {</div>
<div class="line">            <span class="keywordflow">if</span> (param === <span class="stringliteral">&#39;hasOwnProperty&#39;</span>) {</div>
<div class="line">              <span class="keywordflow">throw</span> $resourceMinErr(<span class="stringliteral">&#39;badname&#39;</span>, <span class="stringliteral">&quot;hasOwnProperty is not a valid parameter name.&quot;</span>);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (!(<span class="keyword">new</span> RegExp(<span class="stringliteral">&quot;^\\d+$&quot;</span>).test(param)) &amp;&amp; param &amp;&amp;</div>
<div class="line">              (<span class="keyword">new</span> RegExp(<span class="stringliteral">&quot;(^|[^\\\\]):&quot;</span> + param + <span class="stringliteral">&quot;(\\W|$)&quot;</span>).test(url))) {</div>
<div class="line">              urlParams[param] = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">          });</div>
<div class="line">          url = url.replace(/\\:/g, <span class="charliteral">&#39;:&#39;</span>);</div>
<div class="line"></div>
<div class="line">          params = params || {};</div>
<div class="line">          forEach(<span class="keyword">self</span>.urlParams, <span class="keyword">function</span>(_, urlParam) {</div>
<div class="line">            val = params.hasOwnProperty(urlParam) ? params[urlParam] : <span class="keyword">self</span>.defaults[urlParam];</div>
<div class="line">            <span class="keywordflow">if</span> (angular.isDefined(val) &amp;&amp; val !== null) {</div>
<div class="line">              encodedVal = encodeUriSegment(val);</div>
<div class="line">              url = url.replace(<span class="keyword">new</span> RegExp(<span class="stringliteral">&quot;:&quot;</span> + urlParam + <span class="stringliteral">&quot;(\\W|$)&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>), <span class="keyword">function</span>(match, p1) {</div>
<div class="line">                <span class="keywordflow">return</span> encodedVal + p1;</div>
<div class="line">              });</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">              url = url.replace(<span class="keyword">new</span> RegExp(<span class="stringliteral">&quot;(\/?):&quot;</span> + urlParam + <span class="stringliteral">&quot;(\\W|$)&quot;</span>, <span class="stringliteral">&quot;g&quot;</span>), <span class="keyword">function</span>(match,</div>
<div class="line">                  leadingSlashes, tail) {</div>
<div class="line">                <span class="keywordflow">if</span> (tail.charAt(0) == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line">                  <span class="keywordflow">return</span> tail;</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                  <span class="keywordflow">return</span> leadingSlashes + tail;</div>
<div class="line">                }</div>
<div class="line">              });</div>
<div class="line">            }</div>
<div class="line">          });</div>
<div class="line"></div>
<div class="line">          <span class="comment">// strip trailing slashes and set the url (unless this behavior is specifically disabled)</span></div>
<div class="line">          <span class="keywordflow">if</span> (<span class="keyword">self</span>.defaults.stripTrailingSlashes) {</div>
<div class="line">            url = url.replace(/\/+$/, <span class="stringliteral">&#39;&#39;</span>) || <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line">          }</div>
<div class="line"></div>
<div class="line">          <span class="comment">// then replace collapse `/.` if found in the last URL path segment before the query</span></div>
<div class="line">          <span class="comment">// E.g. `http://url.com/id./format?q=x` becomes `http://url.com/id.format?q=x`</span></div>
<div class="line">          url = url.replace(/\/\.(?=\w+($|\?))/, <span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line">          <span class="comment">// replace escaped `/\.` with `/.`</span></div>
<div class="line">          config.url = url.replace(/\/\\\./, <span class="stringliteral">&#39;/.&#39;</span>);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">          <span class="comment">// set params - delegate param encoding to $http</span></div>
<div class="line">          forEach(params, <span class="keyword">function</span>(value, key) {</div>
<div class="line">            <span class="keywordflow">if</span> (!<span class="keyword">self</span>.urlParams[key]) {</div>
<div class="line">              config.params = config.params || {};</div>
<div class="line">              config.params[key] = value;</div>
<div class="line">            }</div>
<div class="line">          });</div>
<div class="line">        }</div>
<div class="line">      };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">      <span class="keyword">function</span> resourceFactory(url, paramDefaults, actions, options) {</div>
<div class="line">        var route = <span class="keyword">new</span> Route(url, options);</div>
<div class="line"></div>
<div class="line">        actions = extend({}, provider.defaults.actions, actions);</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> extractParams(data, actionParams) {</div>
<div class="line">          var ids = {};</div>
<div class="line">          actionParams = extend({}, paramDefaults, actionParams);</div>
<div class="line">          forEach(actionParams, <span class="keyword">function</span>(value, key) {</div>
<div class="line">            <span class="keywordflow">if</span> (isFunction(value)) { value = value(); }</div>
<div class="line">            ids[key] = value &amp;&amp; value.charAt &amp;&amp; value.charAt(0) == <span class="charliteral">&#39;@&#39;</span> ?</div>
<div class="line">              lookupDottedPath(data, value.substr(1)) : value;</div>
<div class="line">          });</div>
<div class="line">          <span class="keywordflow">return</span> ids;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> defaultResponseInterceptor(response) {</div>
<div class="line">          <span class="keywordflow">return</span> response.resource;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="keyword">function</span> Resource(value) {</div>
<div class="line">          shallowClearAndCopy(value || {}, <span class="keyword">this</span>);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        Resource.prototype.toJSON = <span class="keyword">function</span>() {</div>
<div class="line">          var data = extend({}, <span class="keyword">this</span>);</div>
<div class="line">          <span class="keyword">delete</span> data.$promise;</div>
<div class="line">          <span class="keyword">delete</span> data.$resolved;</div>
<div class="line">          <span class="keywordflow">return</span> data;</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">        forEach(actions, <span class="keyword">function</span>(action, name) {</div>
<div class="line">          var hasBody = /^(POST|PUT|PATCH)$/i.test(action.method);</div>
<div class="line"></div>
<div class="line">          Resource[name] = <span class="keyword">function</span>(a1, a2, a3, a4) {</div>
<div class="line">            var params = {}, data, success, error;</div>
<div class="line"></div>
<div class="line">            <span class="comment">/* jshint -W086 */</span> <span class="comment">/* (purposefully fall through case statements) */</span></div>
<div class="line">            <span class="keywordflow">switch</span> (arguments.length) {</div>
<div class="line">              <span class="keywordflow">case</span> 4:</div>
<div class="line">                error = a4;</div>
<div class="line">                success = a3;</div>
<div class="line">              <span class="comment">//fallthrough</span></div>
<div class="line">              <span class="keywordflow">case</span> 3:</div>
<div class="line">              <span class="keywordflow">case</span> 2:</div>
<div class="line">                <span class="keywordflow">if</span> (isFunction(a2)) {</div>
<div class="line">                  <span class="keywordflow">if</span> (isFunction(a1)) {</div>
<div class="line">                    success = a1;</div>
<div class="line">                    error = a2;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                  }</div>
<div class="line"></div>
<div class="line">                  success = a2;</div>
<div class="line">                  error = a3;</div>
<div class="line">                  <span class="comment">//fallthrough</span></div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                  params = a1;</div>
<div class="line">                  data = a2;</div>
<div class="line">                  success = a3;</div>
<div class="line">                  <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">              <span class="keywordflow">case</span> 1:</div>
<div class="line">                <span class="keywordflow">if</span> (isFunction(a1)) success = a1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hasBody) data = a1;</div>
<div class="line">                <span class="keywordflow">else</span> params = a1;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">              <span class="keywordflow">case</span> 0: <span class="keywordflow">break</span>;</div>
<div class="line">              <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">throw</span> $resourceMinErr(<span class="stringliteral">&#39;badargs&#39;</span>,</div>
<div class="line">                  <span class="stringliteral">&quot;Expected up to 4 arguments [params, data, success, error], got {0} arguments&quot;</span>,</div>
<div class="line">                  arguments.length);</div>
<div class="line">            }</div>
<div class="line">            <span class="comment">/* jshint +W086 */</span> <span class="comment">/* (purposefully fall through case statements) */</span></div>
<div class="line"></div>
<div class="line">            var isInstanceCall = <span class="keyword">this</span> instanceof Resource;</div>
<div class="line">            var value = isInstanceCall ? data : (action.isArray ? [] : <span class="keyword">new</span> Resource(data));</div>
<div class="line">            var httpConfig = {};</div>
<div class="line">            var responseInterceptor = action.interceptor &amp;&amp; action.interceptor.response ||</div>
<div class="line">              defaultResponseInterceptor;</div>
<div class="line">            var responseErrorInterceptor = action.interceptor &amp;&amp; action.interceptor.responseError ||</div>
<div class="line">              undefined;</div>
<div class="line"></div>
<div class="line">            forEach(action, <span class="keyword">function</span>(value, key) {</div>
<div class="line">              <span class="keywordflow">if</span> (key != <span class="stringliteral">&#39;params&#39;</span> &amp;&amp; key != <span class="stringliteral">&#39;isArray&#39;</span> &amp;&amp; key != <span class="stringliteral">&#39;interceptor&#39;</span>) {</div>
<div class="line">                httpConfig[key] = copy(value);</div>
<div class="line">              }</div>
<div class="line">            });</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (hasBody) httpConfig.data = data;</div>
<div class="line">            route.setUrlParams(httpConfig,</div>
<div class="line">              extend({}, extractParams(data, action.params || {}), params),</div>
<div class="line">              action.url);</div>
<div class="line"></div>
<div class="line">            var promise = $http(httpConfig).then(<span class="keyword">function</span>(response) {</div>
<div class="line">              var data = response.data,</div>
<div class="line">                promise = value.$promise;</div>
<div class="line"></div>
<div class="line">              <span class="keywordflow">if</span> (data) {</div>
<div class="line">                <span class="comment">// Need to convert action.isArray to boolean in case it is undefined</span></div>
<div class="line">                <span class="comment">// jshint -W018</span></div>
<div class="line">                <span class="keywordflow">if</span> (angular.isArray(data) !== (!!action.isArray)) {</div>
<div class="line">                  <span class="keywordflow">throw</span> $resourceMinErr(<span class="stringliteral">&#39;badcfg&#39;</span>,</div>
<div class="line">                      <span class="stringliteral">&#39;Error in resource configuration for action `{0}`. Expected response to &#39;</span> +</div>
<div class="line">                      <span class="stringliteral">&#39;contain an {1} but got an {2} (Request: {3} {4})&#39;</span>, name, action.isArray ? <span class="stringliteral">&#39;array&#39;</span> : <span class="stringliteral">&#39;object&#39;</span>,</div>
<div class="line">                    angular.isArray(data) ? <span class="stringliteral">&#39;array&#39;</span> : <span class="stringliteral">&#39;object&#39;</span>, httpConfig.method, httpConfig.url);</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// jshint +W018</span></div>
<div class="line">                <span class="keywordflow">if</span> (action.isArray) {</div>
<div class="line">                  value.length = 0;</div>
<div class="line">                  forEach(data, <span class="keyword">function</span>(item) {</div>
<div class="line">                    <span class="keywordflow">if</span> (typeof item === <span class="stringliteral">&quot;object&quot;</span>) {</div>
<div class="line">                      value.push(<span class="keyword">new</span> Resource(item));</div>
<div class="line">                    } <span class="keywordflow">else</span> {</div>
<div class="line">                      <span class="comment">// Valid JSON values may be string literals, and these should not be converted</span></div>
<div class="line">                      <span class="comment">// into objects. These items will not have access to the Resource prototype</span></div>
<div class="line">                      <span class="comment">// methods, but unfortunately there</span></div>
<div class="line">                      value.push(item);</div>
<div class="line">                    }</div>
<div class="line">                  });</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                  shallowClearAndCopy(data, value);</div>
<div class="line">                  value.$promise = promise;</div>
<div class="line">                }</div>
<div class="line">              }</div>
<div class="line"></div>
<div class="line">              value.$resolved = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">              response.resource = value;</div>
<div class="line"></div>
<div class="line">              <span class="keywordflow">return</span> response;</div>
<div class="line">            }, <span class="keyword">function</span>(response) {</div>
<div class="line">              value.$resolved = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">              (error || noop)(response);</div>
<div class="line"></div>
<div class="line">              <span class="keywordflow">return</span> $q.reject(response);</div>
<div class="line">            });</div>
<div class="line"></div>
<div class="line">            promise = promise.then(</div>
<div class="line">              <span class="keyword">function</span>(response) {</div>
<div class="line">                var value = responseInterceptor(response);</div>
<div class="line">                (success || noop)(value, response.headers);</div>
<div class="line">                <span class="keywordflow">return</span> value;</div>
<div class="line">              },</div>
<div class="line">              responseErrorInterceptor);</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span> (!isInstanceCall) {</div>
<div class="line">              <span class="comment">// we are creating instance / collection</span></div>
<div class="line">              <span class="comment">// - set the initial promise</span></div>
<div class="line">              <span class="comment">// - return the instance / collection</span></div>
<div class="line">              value.$promise = promise;</div>
<div class="line">              value.$resolved = <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">              <span class="keywordflow">return</span> value;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="comment">// instance call</span></div>
<div class="line">            <span class="keywordflow">return</span> promise;</div>
<div class="line">          };</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">          Resource.prototype[<span class="charliteral">&#39;$&#39;</span> + name] = <span class="keyword">function</span>(params, success, error) {</div>
<div class="line">            <span class="keywordflow">if</span> (isFunction(params)) {</div>
<div class="line">              error = success; success = params; params = {};</div>
<div class="line">            }</div>
<div class="line">            var result = Resource[name].call(<span class="keyword">this</span>, params, <span class="keyword">this</span>, success, error);</div>
<div class="line">            <span class="keywordflow">return</span> result.$promise || result;</div>
<div class="line">          };</div>
<div class="line">        });</div>
<div class="line"></div>
<div class="line">        Resource.bind = <span class="keyword">function</span>(additionalParamDefaults) {</div>
<div class="line">          <span class="keywordflow">return</span> resourceFactory(url, extend({}, paramDefaults, additionalParamDefaults), actions);</div>
<div class="line">        };</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> Resource;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">return</span> resourceFactory;</div>
<div class="line">    }];</div>
<div class="line">  });</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">})(window, window.angular);</div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
