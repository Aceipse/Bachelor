<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>WisR web applikation: grunt-istanbul [![Build Status](https://travis-ci.org/taichi/grunt-istanbul.png)](https://travis-ci.org/taichi/grunt-istanbul)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WisR web applikation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">grunt-istanbul [![Build Status](<a href="https://travis-ci.org/taichi/grunt-istanbul.png">https://travis-ci.org/taichi/grunt-istanbul.png</a>)](<a href="https://travis-ci.org/taichi/grunt-istanbul">https://travis-ci.org/taichi/grunt-istanbul</a>) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>JavaScript codecoverage tool for Grunt</p>
<h2>Getting Started</h2>
<p>This plugin requires Grunt ~0.4.1</p>
<p>Install this grunt plugin next to your project's https://github.com/cowboy/grunt/blob/master/docs/getting_started.md "Gruntfile.js" with: <code>npm install grunt-istanbul</code></p>
<p>Then add this line to your project's <code>Gruntfile.js</code> gruntfile:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;grunt.loadNpmTasks(&#39;grunt-istanbul&#39;);</div>
</div><!-- fragment --><h2>Documentation</h2>
<p>To use this grunt-istanbul plugin, register a grunt task to run the following:</p>
<ol type="1">
<li>Instrument your source code</li>
<li>Run your test suite against your instrumented source code</li>
<li><a class="el" href="class_store.html">Store</a> your coverage results</li>
<li>Make the report</li>
</ol>
<p>For step 2, an environment variable can be used to determine which path to use for loading the source code to run the tests against. For example, when you normally run your tests you want them to point directly at your source code. But when you run your instanbul code coverage task you want your tests to point at your instrumented source code. The <code>grunt-env</code> plugin can be used for setting an environment variable in a grunt task. Here's an example solution that solves this problem using <code>grunt-env</code> and <code>grunt-mocha-test</code>:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// in Gruntfile.js</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;module.exports = function (grunt) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  grunt.initConfig({</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    env: {</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      coverage: {</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;        APP_DIR_FOR_CODE_COVERAGE: &#39;../test/coverage/instrument/app/&#39;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;      }</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;    },</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;    instrument: {</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;      files: &#39;app/*.js&#39;,</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;      options: {</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        lazy: true,</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        basePath: &#39;test/coverage/instrument/&#39;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;      }</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    },</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    mochaTest: {</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;      options: {</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;        reporter: &#39;spec&#39;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;      },</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;      src: [&#39;test/*.js&#39;]</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    },</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;    storeCoverage: {</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;      options: {</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        dir: &#39;test/coverage/reports&#39;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;      }</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    },</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    makeReport: {</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;      src: &#39;test/coverage/reports/**/*.json&#39;,</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;      options: {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        type: &#39;lcov&#39;,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        dir: &#39;test/coverage/reports&#39;,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        print: &#39;detail&#39;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;      }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  });</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  grunt.registerTask(&#39;coverage&#39;, [&#39;env:coverage&#39;, &#39;instrument&#39;, &#39;mochaTest&#39;,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    &#39;storeCoverage&#39;, &#39;makeReport&#39;]);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;};</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// require_helper.js</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;module.exports = function (path) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;  return require((process.env.APP_DIR_FOR_CODE_COVERAGE || &#39;../app/&#39;) + path);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;};</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// using requireHelper in a test</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;var requireHelper = require(&#39;../require_helper&#39;);</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;var formValidator = requireHelper(&#39;form_validator&#39;);</div>
</div><!-- fragment --><p>You can also pass an <code>instrumenter</code> argument to the instrument <code>options</code> as well as any other arguments that your instrumenter takes.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// in Gruntfile.js</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;module.exports = function (grunt) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; var isparta = require(&#39;isparta&#39;);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  grunt.initConfig({</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    instrument: {</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      files: &#39;app/*.es6&#39;,</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      options: {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        lazy: true,</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        basePath: &#39;test/coverage/instrument/&#39;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        babel: {ignore: false, experimental: true, extensions: [&#39;.es6&#39;]},</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        instrumenter: isparta.Instrumenter</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;      }</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  });</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;};</div>
</div><!-- fragment --><p>If you want to specify a current working directory, you can specify a path the cwd <code>options</code> :</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;// in Gruntfile.js</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;module.exports = function (grunt) {</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160; var isparta = require(&#39;isparta&#39;);</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;  grunt.initConfig({</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    instrument: {</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;      files: &#39;**/*.es6&#39;,</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;      options: {</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;        cwd: &#39;app/&#39;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;        lazy: true,</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;        basePath: &#39;test/coverage/instrument/&#39;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        babel: {ignore: false, experimental: true, extensions: [&#39;.es6&#39;]}</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;      }</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;    }</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;  });</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;};</div>
</div><!-- fragment --><p>Also, checkout the example Gruntfile.js in this repo (note that you do not need to implement the <code>reloadTasks</code> task in this example): <a href="https://github.com/taichi/grunt-istanbul/blob/master/Gruntfile.js#69">Gruntfile.js</a></p>
<h3>more examples</h3>
<ul>
<li><a href="http://www.gregjopa.com/2014/02/testing-and-code-coverage-with-node-js-apps/">Testing and Code Coverage With Node.js Apps</a><ul>
<li><a href="https://github.com/gregjopa/express-app-testing-demo">gregjopa/express-app-testing-demo</a></li>
</ul>
</li>
</ul>
<h2>Contributing</h2>
<p>In lieu of a formal styleguide, take care to maintain the existing coding style. Add unit tests for any new or changed functionality. Lint and test your code using <a href="https://github.com/cowboy/grunt">grunt</a>.</p>
<h2>Release History</h2>
<p>_(Nothing yet)_</p>
<h2>License</h2>
<p>Copyright (c) 2014 taichi Licensed under the MIT license. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
