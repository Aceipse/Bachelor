Callback wrapping utility

\subsection*{U\+S\+A\+G\+E}


\begin{DoxyCode}
1 var wrappy = require("wrappy")
2 
3 // var wrapper = wrappy(wrapperFunction)
4 
5 // make sure a cb is called only once
6 // See also: http://npm.im/once for this specific use case
7 var once = wrappy(function (cb) \{
8   var called = false
9   return function () \{
10     if (called) return
11     called = true
12     return cb.apply(this, arguments)
13   \}
14 \})
15 
16 function printBoo () \{
17   console.log('boo')
18 \}
19 // has some rando property
20 printBoo.iAmBooPrinter = true
21 
22 var onlyPrintOnce = once(printBoo)
23 
24 onlyPrintOnce() // prints 'boo'
25 onlyPrintOnce() // does nothing
26 
27 // random property is retained!
28 assert.equal(onlyPrintOnce.iAmBooPrinter, true)
\end{DoxyCode}
 