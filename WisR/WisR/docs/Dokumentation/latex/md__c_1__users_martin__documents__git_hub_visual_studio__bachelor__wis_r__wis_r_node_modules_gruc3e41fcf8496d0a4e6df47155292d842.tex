node-\/http-\/signature is a node.\+js library that has client and server components for Joyent\textquotesingle{}s H\+T\+T\+P Signature Scheme.

\subsection*{Usage}

Note the example below signs a request with the same key/cert used to start an H\+T\+T\+P server. This is almost certainly not what you actually want, but is just used to illustrate the A\+P\+I calls; you will need to provide your own key management in addition to this library.

\subsubsection*{Client}


\begin{DoxyCode}
var fs = require(\textcolor{stringliteral}{'fs'});
var https = require(\textcolor{stringliteral}{'https'});
var httpSignature = require(\textcolor{stringliteral}{'http-signature'});

var key = fs.readFileSync(\textcolor{stringliteral}{'./key.pem'}, \textcolor{stringliteral}{'ascii'});

var options = \{
  host: \textcolor{stringliteral}{'localhost'},
  port: 8443,
  path: \textcolor{charliteral}{'/'},
  method: \textcolor{stringliteral}{'GET'},
  headers: \{\}
\};

\textcolor{comment}{// Adds a 'Date' header in, signs it, and adds the}
\textcolor{comment}{// 'Authorization' header in.}
var req = https.request(options, \textcolor{keyword}{function}(res) \{
  console.log(res.statusCode);
\});


httpSignature.sign(req, \{
  key: key,
  keyId: \textcolor{stringliteral}{'./cert.pem'}
\});

req.end();
\end{DoxyCode}


\subsubsection*{Server}


\begin{DoxyCode}
var fs = require(\textcolor{stringliteral}{'fs'});
var https = require(\textcolor{stringliteral}{'https'});
var httpSignature = require(\textcolor{stringliteral}{'http-signature'});

var options = \{
  key: fs.readFileSync(\textcolor{stringliteral}{'./key.pem'}),
  cert: fs.readFileSync(\textcolor{stringliteral}{'./cert.pem'})
\};

https.createServer(options, \textcolor{keyword}{function} (req, res) \{
  var rc = 200;
  var parsed = httpSignature.parseRequest(req);
  var pub = fs.readFileSync(parsed.keyId, \textcolor{stringliteral}{'ascii'});
  \textcolor{keywordflow}{if} (!httpSignature.verifySignature(parsed, pub))
    rc = 401;

  res.writeHead(rc);
  res.end();
\}).listen(8443);
\end{DoxyCode}


\subsection*{Installation}

\begin{DoxyVerb}npm install http-signature
\end{DoxyVerb}


\subsection*{License}

M\+I\+T.

\subsection*{Bugs}

See \href{https://github.com/joyent/node-http-signature/issues}{\tt https\+://github.\+com/joyent/node-\/http-\/signature/issues}. 