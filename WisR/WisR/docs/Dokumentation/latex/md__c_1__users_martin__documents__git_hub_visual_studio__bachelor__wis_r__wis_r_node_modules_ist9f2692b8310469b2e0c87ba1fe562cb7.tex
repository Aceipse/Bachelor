\href{https://travis-ci.org/nodeca/js-yaml}{\tt !\mbox{[}Build Status\mbox{]}(https\+://travis-\/ci.\+org/nodeca/js-\/yaml.\+svg?branch=master)} \href{https://www.npmjs.org/package/js-yaml}{\tt !\mbox{[}N\+P\+M version\mbox{]}(https\+://img.\+shields.\+io/npm/v/js-\/yaml.\+svg)}

\href{http://nodeca.github.com/js-yaml/}{\tt Online Demo}

This is an implementation of \href{http://yaml.org/}{\tt Y\+A\+M\+L}, a human friendly data serialization language. Started as \href{http://pyyaml.org/}{\tt Py\+Y\+A\+M\+L} port, it was completely rewritten from scratch. Now it\textquotesingle{}s very fast, and supports 1.\+2 spec.

\subsection*{Installation }

\subsubsection*{Y\+A\+M\+L module for node.\+js}


\begin{DoxyCode}
1 npm install js-yaml
\end{DoxyCode}


\subsubsection*{C\+L\+I executable}

If you want to inspect your Y\+A\+M\+L files from C\+L\+I, install js-\/yaml globally\+:


\begin{DoxyCode}
1 npm install -g js-yaml
\end{DoxyCode}


\paragraph*{Usage}


\begin{DoxyCode}
1 usage: js-yaml [-h] [-v] [-c] [-t] file
2 
3 Positional arguments:
4   file           File with YAML document(s)
5 
6 Optional arguments:
7   -h, --help     Show this help message and exit.
8   -v, --version  Show program's version number and exit.
9   -c, --compact  Display errors in compact mode
10   -t, --trace    Show stack trace on error
\end{DoxyCode}


\subsubsection*{Bundled Y\+A\+M\+L library for browsers}


\begin{DoxyCode}
1 <script src="esprima.js"></script>
2 <script src="js-yaml.min.js"></script>
3 <script type="text/javascript">
4 var doc = jsyaml.load('greeting: hello\(\backslash\)nname: world');
5 </script>
\end{DoxyCode}


Browser support was done mostly for online demo. If you find any errors -\/ feel free to send pull requests with fixes. Also note, that I\+E and other old browsers needs \href{https://github.com/kriskowal/es5-shim}{\tt es5-\/shims} to operate.

Notes\+:


\begin{DoxyEnumerate}
\item We have no resourses to support browserified version. Don\textquotesingle{}t expect it to be well tested. Don\textquotesingle{}t expect fast fixes if something goes wrong there.
\item {\ttfamily !!js/function} in browser bundle will not work by default. If you really need it -\/ load {\ttfamily esprima} parser first (via amd or directly).
\item {\ttfamily !!bin} in browser will return {\ttfamily Array}, because browsers do not support node.\+js {\ttfamily Buffer} and adding Buffer shims is completely useless on practice.
\end{DoxyEnumerate}

\subsection*{A\+P\+I }

Here we cover the most \textquotesingle{}useful\textquotesingle{} methods. If you need advanced details (creating your own tags), see \href{https://github.com/nodeca/js-yaml/wiki}{\tt wiki} and \href{https://github.com/nodeca/js-yaml/tree/master/examples}{\tt examples} for more info.


\begin{DoxyCode}
1 yaml = require('js-yaml');
2 fs   = require('fs');
3 
4 // Get document, or throw exception on error
5 try \{
6   var doc = yaml.safeLoad(fs.readFileSync('/home/ixti/example.yml', 'utf8'));
7   console.log(doc);
8 \} catch (e) \{
9   console.log(e);
10 \}
\end{DoxyCode}


\subsubsection*{safe\+Load (string \mbox{[} , options \mbox{]})}

{\bfseries Recommended loading way.} Parses {\ttfamily string} as single Y\+A\+M\+L document. Returns a Java\+Script object or throws {\ttfamily Y\+A\+M\+L\+Exception} on error. By default, does not support regexps, functions and undefined. This method is safe for untrusted data.

options\+:


\begin{DoxyItemize}
\item {\ttfamily filename} \+\_\+(default\+: null)\+\_\+ -\/ string to be used as a file path in error/warning messages.
\item {\ttfamily on\+Warning} \+\_\+(default\+: null)\+\_\+ -\/ function to call on warning messages. Loader will throw on warnings if this function is not provided.
\item {\ttfamily schema} \+\_\+(default\+: {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+M\+A})\+\_\+ -\/ specifies a schema to use.
\begin{DoxyItemize}
\item {\ttfamily F\+A\+I\+L\+S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+M\+A} -\/ only strings, arrays and plain objects\+: \href{http://www.yaml.org/spec/1.2/spec.html#id2802346}{\tt http\+://www.\+yaml.\+org/spec/1.\+2/spec.\+html\#id2802346}
\item {\ttfamily J\+S\+O\+N\+\_\+\+S\+C\+H\+E\+M\+A} -\/ all J\+S\+O\+N-\/supported types\+: \href{http://www.yaml.org/spec/1.2/spec.html#id2803231}{\tt http\+://www.\+yaml.\+org/spec/1.\+2/spec.\+html\#id2803231}
\item {\ttfamily C\+O\+R\+E\+\_\+\+S\+C\+H\+E\+M\+A} -\/ same as {\ttfamily J\+S\+O\+N\+\_\+\+S\+C\+H\+E\+M\+A}\+: \href{http://www.yaml.org/spec/1.2/spec.html#id2804923}{\tt http\+://www.\+yaml.\+org/spec/1.\+2/spec.\+html\#id2804923}
\item {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+M\+A} -\/ all supported Y\+A\+M\+L types, without unsafe ones ({\ttfamily !!js/undefined}, {\ttfamily !!js/regexp} and {\ttfamily !!js/function})\+: \href{http://yaml.org/type/}{\tt http\+://yaml.\+org/type/}
\item {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+F\+U\+L\+L\+\_\+\+S\+C\+H\+E\+M\+A} -\/ all supported Y\+A\+M\+L types.
\end{DoxyItemize}
\end{DoxyItemize}

N\+O\+T\+E\+: This function {\bfseries does not} understand multi-\/document sources, it throws exception on those.

N\+O\+T\+E\+: J\+S-\/\+Y\+A\+M\+L {\bfseries does not} support schema-\/specific tag resolution restrictions. So, J\+S\+O\+N schema is not as strict as defined in the Y\+A\+M\+L specification. It allows numbers in any notaion, use {\ttfamily Null} and {\ttfamily N\+U\+L\+L} as {\ttfamily null}, etc. Core schema also has no such restrictions. It allows binary notation for integers.

\subsubsection*{load (string \mbox{[} , options \mbox{]})}

{\bfseries Use with care with untrusted sources}. The same as {\ttfamily safe\+Load()} but uses {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+F\+U\+L\+L\+\_\+\+S\+C\+H\+E\+M\+A} by default -\/ adds some Java\+Script-\/specific types\+: {\ttfamily !!js/function}, {\ttfamily !!js/regexp} and {\ttfamily !!js/undefined}. For untrusted sources you must additionally validate object structure, to avoid injections\+:


\begin{DoxyCode}
1 var untrusted\_code = '"toString": !<tag:yaml.org,2002:js/function> "function ()\{very\_evil\_thing();\}"';
2 
3 // I'm just converting that string, what could possibly go wrong?
4 require('js-yaml').load(untrusted\_code) + ''
\end{DoxyCode}


\subsubsection*{safe\+Load\+All (string, iterator \mbox{[} , options \mbox{]})}

Same as {\ttfamily safe\+Load()}, but understands multi-\/document sources and apply {\ttfamily iterator} to each document.


\begin{DoxyCode}
1 var yaml = require('js-yaml');
2 
3 yaml.safeLoadAll(data, function (doc) \{
4   console.log(doc);
5 \});
\end{DoxyCode}


\subsubsection*{load\+All (string, iterator \mbox{[} , options \mbox{]})}

Same as {\ttfamily safe\+Load\+All()} but uses {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+F\+U\+L\+L\+\_\+\+S\+C\+H\+E\+M\+A} by default.

\subsubsection*{safe\+Dump (object \mbox{[} , options \mbox{]})}

Serializes {\ttfamily object} as Y\+A\+M\+L document. Uses {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+M\+A}, so it will throw exception if you try to dump regexps or functions. However, you can disable exceptions by {\ttfamily skip\+Invalid} option.

options\+:


\begin{DoxyItemize}
\item {\ttfamily indent} \+\_\+(default\+: 2)\+\_\+ -\/ indentation width to use (in spaces).
\item {\ttfamily skip\+Invalid} \+\_\+(default\+: false)\+\_\+ -\/ do not throw on invalid types (like function in the safe schema) and skip pairs and single values with such types.
\item {\ttfamily flow\+Level} (default\+: -\/1) -\/ specifies level of nesting, when to switch from block to flow style for collections. -\/1 means block style everwhere
\item {\ttfamily styles} -\/ \char`\"{}tag\char`\"{} =$>$ \char`\"{}style\char`\"{} map. Each tag may have own set of styles.
\item {\ttfamily schema} \+\_\+(default\+: {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+A\+F\+E\+\_\+\+S\+C\+H\+E\+M\+A})\+\_\+ specifies a schema to use.
\item {\ttfamily sort\+Keys} \+\_\+(default\+: {\ttfamily false})\+\_\+ -\/ if {\ttfamily true}, sort keys when dumping Y\+A\+M\+L. If a function, use the function to sort the keys.
\end{DoxyItemize}

styles\+:


\begin{DoxyCode}
1 !!null
2   "canonical"   => "~"
3 
4 !!int
5   "binary"      => "0b1", "0b101010", "0b1110001111010"
6   "octal"       => "01", "052", "016172"
7   "decimal"     => "1", "42", "7290"
8   "hexadecimal" => "0x1", "0x2A", "0x1C7A"
9 
10 !!null, !!bool, !!float
11   "lowercase"   => "null", "true", "false", ".nan", '.inf'
12   "uppercase"   => "NULL", "TRUE", "FALSE", ".NAN", '.INF'
13   "camelcase"   => "Null", "True", "False", ".NaN", '.Inf'
\end{DoxyCode}


By default, !!int uses {\ttfamily decimal}, and !!null, !!bool, !!float use {\ttfamily lowercase}.

\subsubsection*{dump (object \mbox{[} , options \mbox{]})}

Same as {\ttfamily safe\+Dump()} but without limits (uses {\ttfamily D\+E\+F\+A\+U\+L\+T\+\_\+\+F\+U\+L\+L\+\_\+\+S\+C\+H\+E\+M\+A} by default).

\subsection*{Supported Y\+A\+M\+L types }

The list of standard Y\+A\+M\+L tags and corresponding Java\+Scipt types. See also \href{http://pyyaml.org/wiki/YAMLTagDiscussion}{\tt Y\+A\+M\+L tag discussion} and \href{http://yaml.org/type/}{\tt Y\+A\+M\+L types repository}.


\begin{DoxyCode}
1 !!null ''                   # null
2 !!bool 'yes'                # bool
3 !!int '3...'                # number
4 !!float '3.14...'           # number
5 !!binary '...base64...'     # buffer
6 !!timestamp 'YYYY-...'      # date
7 !!omap [ ... ]              # array of key-value pairs
8 !!pairs [ ... ]             # array or array pairs
9 !!set \{ ... \}               # array of objects with given keys and null values
10 !!str '...'                 # string
11 !!seq [ ... ]               # array
12 !!map \{ ... \}               # object
\end{DoxyCode}


{\bfseries Java\+Script-\/specific tags}


\begin{DoxyCode}
1 !!js/regexp /pattern/gim            # RegExp
2 !!js/undefined ''                   # Undefined
3 !!js/function 'function () \{...\}'   # Function
\end{DoxyCode}


\subsection*{Caveats }

Note, that you use arrays or objects as key in J\+S-\/\+Y\+A\+M\+L. J\+S do not allows objects or array as keys, and stringifies (by calling .to\+String method) them at the moment of adding them.


\begin{DoxyCode}
1 ---
2 ? [ foo, bar ]
3 : - baz
4 ? \{ foo: bar \}
5 : - baz
6   - baz
\end{DoxyCode}



\begin{DoxyCode}
1 \{ "foo,bar": ["baz"], "[object Object]": ["baz", "baz"] \}
\end{DoxyCode}


Also, reading of properties on implicit block mapping keys is not supported yet. So, the following Y\+A\+M\+L document cannot be loaded.


\begin{DoxyCode}
1 &anchor foo:
2   foo: bar
3   *anchor: duplicate key
4   baz: bat
5   *anchor: duplicate key
\end{DoxyCode}


\subsection*{Breaking changes in 2.\+x.\+x -\/$>$ 3.\+x.\+x }

If your have not used {\bfseries custom} tags or loader classes and not loaded yaml files via {\ttfamily require()} -\/ no changes needed. Just upgrade library.

In other case, you should\+:


\begin{DoxyEnumerate}
\item Replace all occurences of `require(\textquotesingle{}xxxx.\+yml\textquotesingle{}){\ttfamily by}fs.\+read\+File\+Sync(){\ttfamily + }yaml.\+safe\+Load()`.
\item rewrite your custom tags constructors and custom loader classes, to conform new A\+P\+I. See \href{https://github.com/nodeca/js-yaml/tree/master/examples}{\tt examples} and \href{https://github.com/nodeca/js-yaml/wiki}{\tt wiki} for details.
\end{DoxyEnumerate}

\subsection*{License }

View the \href{https://github.com/nodeca/js-yaml/blob/master/LICENSE}{\tt L\+I\+C\+E\+N\+S\+E} file (M\+I\+T). 