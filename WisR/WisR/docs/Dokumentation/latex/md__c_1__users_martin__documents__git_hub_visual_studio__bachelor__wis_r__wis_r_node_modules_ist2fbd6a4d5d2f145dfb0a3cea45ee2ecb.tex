\label{_optionator}%


Optionator is an option parsing and help generation library.

\subsection*{Why?}

The problem with other option parsers, such as {\ttfamily yargs} or {\ttfamily minimist}, is they just accept all input, valid or not. With Optionator, if you mistype an option, it will give you an error (with a suggestion for what you meant). If you give the wrong type of argument for an option, it will give you an error rather than supplying the wrong input to your application. \begin{DoxyVerb}$ cmd --halp
Invalid option '--halp' - perhaps you meant '--help'?

$ cmd --count str
Invalid value for option 'count' - expected type Int, received value: str.
\end{DoxyVerb}


Over helpful features include reformatting the help text based on the size of the console, so that it fits even if the console is narrow, and accepting not just an array (eg. process.\+argv), but a string or object as well, making things like testing much easier.

\subsection*{About}

Optionator uses \href{https://github.com/gkz/type-check}{\tt type-\/check} and \href{https://github.com/gkz/levn}{\tt levn} behind the scenes to cast and verify input according the specified types.

Optionator is used by \href{http://graspjs.com}{\tt Grasp}, \href{http://eslint.org}{\tt eslint}, \href{http://livescript.net}{\tt Live\+Script}, \href{https://github.com/estools/esmangle}{\tt esmangle}, \href{https://github.com/estools/escodegen}{\tt escodegen}, and more.

M\+I\+T license. Version 0.\+5.\+0 \begin{DoxyVerb}npm install optionator
\end{DoxyVerb}


For updates on Optionator, \href{https://twitter.com/gkzahariev}{\tt follow me on twitter}.

\subsection*{Usage}

`require(\textquotesingle{}optionator\textquotesingle{});{\ttfamily returns a function. It has one property,}V\+E\+R\+S\+I\+O\+N{\ttfamily , the current version of the library as a string. This function is called with an object specifying your options and other information, see the \mbox{[}settings format section\mbox{]}(\#settings-\/format). This in turn returns an object with three properties,}parse{\ttfamily ,}generate\+Help{\ttfamily , and}generate\+Help\+For\+Option`, which are all functions.


\begin{DoxyCode}
var optionator = require(\textcolor{stringliteral}{'optionator'})(\{
  prepend: \textcolor{stringliteral}{'Usage: cmd [options]'},
  append: \textcolor{stringliteral}{'Version 1.0.0'},
  options: [\{
    option: \textcolor{stringliteral}{'help'},
    alias: \textcolor{charliteral}{'h'},
    type: \textcolor{stringliteral}{'Boolean'},
    description: \textcolor{stringliteral}{'displays help'}
  \}, \{
    option: \textcolor{stringliteral}{'count'},
    alias: \textcolor{charliteral}{'c'},
    type: \textcolor{stringliteral}{'Int'},
    description: \textcolor{stringliteral}{'number of things'},
    example: \textcolor{stringliteral}{'cmd --count 2'}
  \}]
\});
\end{DoxyCode}


\subsubsection*{parse(input, parse\+Options)}

{\ttfamily parse} processes the {\ttfamily input} according to your settings, and returns an object with the results.

\subparagraph*{arguments}


\begin{DoxyItemize}
\item input -\/ {\ttfamily \mbox{[}String\mbox{]} $\vert$ Object $\vert$ String} -\/ the input you wish to parse
\item parse\+Options -\/ {\ttfamily \{slice\+: Int\}} -\/ all options optional
\begin{DoxyItemize}
\item {\ttfamily slice} specifies how much to slice away from the beginning if the input is an array or string -\/ by default {\ttfamily 0} for string, {\ttfamily 2} for array (works with {\ttfamily process.\+argv})
\end{DoxyItemize}
\end{DoxyItemize}

\subparagraph*{returns}

{\ttfamily Object} -\/ the parsed options, each key is a camel\+Case version of the option name (specified in dash-\/case), and each value is the processed value for that option. Positional values are in an array under the {\ttfamily \+\_\+} key.

\#\#\#\#\# example 
\begin{DoxyCode}
parse([\textcolor{stringliteral}{'node'}, \textcolor{stringliteral}{'t.js'}, \textcolor{stringliteral}{'--count'}, \textcolor{charliteral}{'2'}, \textcolor{stringliteral}{'positional'}]); \textcolor{comment}{// \{count: 2, \_: ['positional']\}}
parse(\textcolor{stringliteral}{'--count 2 positional'});                         \textcolor{comment}{// \{count: 2, \_: ['positional']\}}
parse(\{count: 2, \_:[\textcolor{stringliteral}{'positional'}]\});                   \textcolor{comment}{// \{count: 2, \_: ['positional']\}}
\end{DoxyCode}


\subsubsection*{generate\+Help(help\+Options)}

{\ttfamily generate\+Help} produces help text based on your settings.

\subparagraph*{arguments}


\begin{DoxyItemize}
\item help\+Options -\/ {\ttfamily \{show\+Hidden\+: Boolean, interpolate\+: Object\}} -\/ all options optional
\begin{DoxyItemize}
\item {\ttfamily show\+Hidden} specifies whether to show options with {\ttfamily hidden\+: true} specified, by default it is {\ttfamily false}
\item {\ttfamily interpolate} specify data to be interpolated in {\ttfamily prepend} and {\ttfamily append} text, {\ttfamily \{\{key\}\}} is the format -\/ eg. `generate\+Help(\{interpolate\+:\{version\+: \textquotesingle{}0.\+4.\+2\textquotesingle{}\}\}){\ttfamily , will change this}append{\ttfamily text\+:}Version \{\{version\}\}{\ttfamily to}Version 0.\+4.\+2`
\end{DoxyItemize}
\end{DoxyItemize}

\subparagraph*{returns}

{\ttfamily String} -\/ the generated help text

\#\#\#\#\# example 
\begin{DoxyCode}
generateHelp(); \textcolor{comment}{/*}
\textcolor{comment}{"Usage: cmd [options] positional}
\textcolor{comment}{}
\textcolor{comment}{  -h, --help       displays help}
\textcolor{comment}{  -c, --count Int  number of things}
\textcolor{comment}{}
\textcolor{comment}{Version  1.0.0}
\textcolor{comment}{"*/}
\end{DoxyCode}


\subsubsection*{generate\+Help\+For\+Option(option\+Name)}

{\ttfamily generate\+Help\+For\+Option} produces expanded help text for the specified with {\ttfamily option\+Name} option. If an {\ttfamily example} was specified for the option, it will be displayed, and if a {\ttfamily long\+Description} was specified, it will display that instead of the {\ttfamily description}.

\subparagraph*{arguments}


\begin{DoxyItemize}
\item option\+Name -\/ {\ttfamily String} -\/ the name of the option to display
\end{DoxyItemize}

\subparagraph*{returns}

{\ttfamily String} -\/ the generated help text for the option

\#\#\#\#\# example 
\begin{DoxyCode}
generateHelpForOption(\textcolor{stringliteral}{'count'}); \textcolor{comment}{/*}
\textcolor{comment}{"-c, --count Int}
\textcolor{comment}{description: number of things}
\textcolor{comment}{example: cmd --count 2}
\textcolor{comment}{"*/}
\end{DoxyCode}


\subsection*{Settings Format}

When your `require(\textquotesingle{}optionator\textquotesingle{})`, you get a function that takes in a settings object. This object has the type\+: \begin{DoxyVerb}{
  prepend: Maybe String,
  append: Maybe String,
  options: [{heading: String} | {
    option: String,
    alias: Maybe [String] | String,
    type: Maybe String,
    enum: Maybe [String],
    default: Maybe String,
    restPositional: Maybe Boolean,
    requried: Maybe Boolean,
    overrideRequired: Maybe Bookean,
    dependsOn: Maybe [String] | String,
    description: Maybe String,
    longDescription: Maybe String,
    example: Maybe [String] | String
  }],
  helpStyle: Maybe {
    aliasSeparator: Maybe String,
    typeSeparator: Maybe String,
    descriptionSeparator: Maybe String,
    initialIndent: Maybe Int,
    secondaryIndent: Maybe Int,
    maxPadFactor: Maybe Number
  },
  mutuallyExclusive: Maybe [[String | [String]]],
  concatRepeatedArrays: Maybe Boolean,
  mergeRepeatedObjects: Maybe Boolean
}
\end{DoxyVerb}


\subsubsection*{Top Level Properties}


\begin{DoxyItemize}
\item {\ttfamily prepend} is an optional string to be placed before the options in the help text
\item {\ttfamily append} is an optional string to be placed after the options in the help text
\item {\ttfamily options} is a required array specifying your options and headings, the options and headings will be displayed in the order specified
\item {\ttfamily help\+Style} is an optional object which enables you to change the default appearance of some aspects of the help text
\item {\ttfamily mutually\+Exclusive} is an optional array of arrays of either strings or arrays of strings. The top level array is a list of rules, each rule is a list of elements -\/ each element can be either a string (the name of an option), or a list of strings (a group of option names) -\/ there will be an error if more than one element is present
\item {\ttfamily concat\+Repeated\+Arrays} is an optional boolean (defaults to {\ttfamily false}) -\/ when set to {\ttfamily true} and an option contains an array value and is repeated, the subsequent values for the flag will be appended rather than overwriting the original value -\/ eg. option {\ttfamily g} of type {\ttfamily \mbox{[}String\mbox{]}}\+: {\ttfamily -\/g a -\/g b -\/g c,d} will result in `\mbox{[}\textquotesingle{}a\textquotesingle{},\textquotesingle{}b\textquotesingle{},\textquotesingle{}c\textquotesingle{},\textquotesingle{}d\textquotesingle{}\mbox{]}{\ttfamily  $\ast$}merge\+Repeated\+Objects{\ttfamily is an optional boolean (defaults to}false{\ttfamily ) -\/ when set to}true{\ttfamily and an option contains an object value and is repeated, the subsequent values for the flag will be merged rather than overwriting the original value -\/ eg. option}g{\ttfamily of type}Object{\ttfamily \+:}-\/g a\+:1 -\/g b\+:2 -\/g c\+:3,d\+:4{\ttfamily will result in}\{a\+: 1, b\+: 2, c\+: 3, d\+: 4\}`
\end{DoxyItemize}

\paragraph*{Heading Properties}


\begin{DoxyItemize}
\item {\ttfamily heading} a required string, the name of the heading
\end{DoxyItemize}

\paragraph*{Option Properties}


\begin{DoxyItemize}
\item {\ttfamily option} the required name of the option -\/ use dash-\/case, without the leading dashes
\item {\ttfamily alias} is an optional string or array of strings which specify any aliases for the option
\item {\ttfamily type} is a required string in the \href{https://github.com/gkz/type-check}{\tt type check} \href{https://github.com/gkz/type-check#type-format}{\tt format}, this will be used to cast the inputted value and validate it
\item {\ttfamily enum} is an optional array of strings, each string will be parsed by \href{https://github.com/gkz/levn}{\tt levn} -\/ the argument value must be one of the resulting values -\/ each potential value must validate against the specified {\ttfamily type}
\item {\ttfamily default} is a optional string, which will be parsed by \href{https://github.com/gkz/levn}{\tt levn} and used as the default value if none is set -\/ the value must validate against the specified {\ttfamily type}
\item {\ttfamily rest\+Positional} is an optional boolean -\/ if set to {\ttfamily true}, everything after the option will be taken to be a positional argument, even if it looks like a named argument
\item {\ttfamily required} is an optional boolean -\/ if set to {\ttfamily true}, the option parsing will fail if the option is not defined
\item {\ttfamily override\+Required} is a optional boolean -\/ if set to {\ttfamily true} and the option is used, and there is another option which is required but not set, it will override the need for the required option and there will be no error -\/ this is useful if you have required options and want to use {\ttfamily -\/-\/help} or {\ttfamily -\/-\/version} flags
\item {\ttfamily depends\+On} is an optional string or array of strings -\/ if simply a string (the name of another option), it will make sure that that other option is set, if an array of strings, depending on whether {\ttfamily \textquotesingle{}and\textquotesingle{}} or {\ttfamily \textquotesingle{}or\textquotesingle{}} is first, it will either check whether all (`\mbox{[}\textquotesingle{}and\textquotesingle{}, \textquotesingle{}option-\/a\textquotesingle{}, \textquotesingle{}option-\/b\textquotesingle{}\mbox{]}{\ttfamily ), or at least one (}\mbox{[}\textquotesingle{}or\textquotesingle{}, \textquotesingle{}option-\/a\textquotesingle{}, \textquotesingle{}option-\/b\textquotesingle{}\mbox{]}{\ttfamily ) other options are set $\ast$}description{\ttfamily is an optional string, which will be displayed next to the option in the help text $\ast$}long\+Description{\ttfamily is an optional string, it will be displayed instead of the}description{\ttfamily when}generate\+Help\+For\+Option{\ttfamily is used $\ast$}example{\ttfamily is an optional string or array of strings with example(s) for the option -\/ these will be displayed when}generate\+Help\+For\+Option` is used
\end{DoxyItemize}

\paragraph*{Help Style Properties}


\begin{DoxyItemize}
\item {\ttfamily alias\+Separator} is an optional string, separates multiple names from each other -\/ default\+: \textquotesingle{} ,\textquotesingle{}
\item {\ttfamily type\+Separator} is an optional string, separates the type from the names -\/ default\+: \textquotesingle{} \textquotesingle{}
\item {\ttfamily description\+Separator} is an optional string , separates the description from the padded name and type -\/ default\+: \textquotesingle{} \textquotesingle{}
\item {\ttfamily initial\+Indent} is an optional int -\/ the amount of indent for options -\/ default\+: 2
\item {\ttfamily secondary\+Indent} is an optional int -\/ the amount of indent if wrapped fully (in addition to the initial indent) -\/ default\+: 4
\item {\ttfamily max\+Pad\+Factor} is an optional number -\/ affects the default level of padding for the names/type, it is multiplied by the average of the length of the names/type -\/ default\+: 1.\+5
\end{DoxyItemize}

\subsection*{Argument Format}

At the highest level there are two types of arguments\+: named, and positional.

Name arguments of any length are prefixed with {\ttfamily -\/-\/} (eg. {\ttfamily -\/-\/go}), and those of one character may be prefixed with either {\ttfamily -\/-\/} or {\ttfamily -\/} (eg. {\ttfamily -\/g}).

There are two types of named arguments\+: boolean flags (eg. {\ttfamily -\/-\/problemo}, {\ttfamily -\/p}) which take no value and result in a {\ttfamily true} if they are present, the falsey {\ttfamily undefined} if they are not present, or {\ttfamily false} if present and explicitly prefixed with {\ttfamily no} (eg. {\ttfamily -\/-\/no-\/problemo}). Named arguments with values (eg. {\ttfamily -\/-\/tseries 800}, {\ttfamily -\/t 800}) are the other type. If the option has a type {\ttfamily Boolean} it will automatically be made into a boolean flag. Any other type results in a named argument that takes a value.

For more information about how to properly set types to get the value you want, take a look at the \href{https://github.com/gkz/type-check}{\tt type check} and \href{https://github.com/gkz/levn}{\tt levn} pages.

You can group single character arguments that use a single {\ttfamily -\/}, however all except the last must be boolean flags (which take no value). The last may be a boolean flag, or an argument which takes a value -\/ eg. {\ttfamily -\/ba 2} is equivalent to {\ttfamily -\/b -\/a 2}.

Positional arguments are all those values which do not fall under the above -\/ they can be anywhere, not just at the end. For example, in {\ttfamily cmd -\/b one -\/a 2 two} where {\ttfamily b} is a boolean flag, and {\ttfamily a} has the type {\ttfamily Number}, there are two positional arguments, {\ttfamily one} and {\ttfamily two}.

Everything after an {\ttfamily -\/-\/} is positional, even if it looks like a named argument.

You may optionally use {\ttfamily =} to separate option names from values, for example\+: {\ttfamily -\/-\/count=2}.

If you specify the option {\ttfamily N\+U\+M}, then any argument using a single {\ttfamily -\/} followed by a number will be valid and will set the value of {\ttfamily N\+U\+M}. Eg. {\ttfamily -\/2} will be parsed into {\ttfamily N\+U\+M\+: 2}.

If duplicate named arguments are present, the last one will be taken.

\subsection*{Technical About}

{\ttfamily optionator} is written in \href{http://livescript.net/}{\tt Live\+Script} -\/ a language that compiles to Java\+Script. It uses \href{https://github.com/gkz/levn}{\tt levn} to cast arguments to their specified type, and uses \href{https://github.com/gkz/type-check}{\tt type-\/check} to validate values. It also uses the \href{http://preludels.com/}{\tt prelude.\+ls} library. 